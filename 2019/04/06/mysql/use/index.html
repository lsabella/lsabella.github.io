<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Baishu"><meta name="copyright" content="Baishu"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>Mysql的使用 | Baishu的博客</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"example.com","root":"/","title":"白舒小站","version":"1.6.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"local_search":{"path":"/search.xml"},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><meta name="description" content="数据库概述sql、DB、DBMS分别是什么，他们之间的关系 DB：DataBase（数据库，数据库实际上在硬盘上以文件的形式存在） DBMS：DataBase Management System（数据库管理系统，常见的有：Oracle、SQL Server、MySql、Sybase、informix、DB2、interbase、PostgreSql） SQL：结构化查询语言，是一门标准通用的语言。">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql的使用">
<meta property="og:url" content="http://example.com/2019/04/06/mysql/use/index.html">
<meta property="og:site_name" content="Baishu的博客">
<meta property="og:description" content="数据库概述sql、DB、DBMS分别是什么，他们之间的关系 DB：DataBase（数据库，数据库实际上在硬盘上以文件的形式存在） DBMS：DataBase Management System（数据库管理系统，常见的有：Oracle、SQL Server、MySql、Sybase、informix、DB2、interbase、PostgreSql） SQL：结构化查询语言，是一门标准通用的语言。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-04-06T11:29:33.000Z">
<meta property="article:modified_time" content="2019-03-27T14:23:12.000Z">
<meta property="article:author" content="Baishu">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="Mysql">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Baishu"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="Baishu"><span class="site-author-status" title="Looking for dawn.">⛽️</span></a><div class="site-author-name"><a href="/about/">Baishu</a></div><a class="site-name" href="/about/site.html">Baishu的博客</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">20</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">8</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">17</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/lsabella" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:baishu1024@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#sql%E3%80%81DB%E3%80%81DBMS%E5%88%86%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BB%96%E4%BB%AC%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">1.1.</span> <span class="toc-text">sql、DB、DBMS分别是什么，他们之间的关系</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A1%A8"><span class="toc-number">1.2.</span> <span class="toc-text">什么是表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="toc-number">1.3.</span> <span class="toc-text">SQL分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.</span> <span class="toc-text">导入数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFsql%E8%84%9A%E6%9C%AC%EF%BC%9F"><span class="toc-number">1.5.</span> <span class="toc-text">什么是sql脚本？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.6.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.7.</span> <span class="toc-text">查看表结构</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">2.</span> <span class="toc-text">常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bmysql%E7%89%88%E6%9C%AC"><span class="toc-number">2.1.</span> <span class="toc-text">查看mysql版本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.2.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%BD%93%E5%89%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.</span> <span class="toc-text">查询当前使用的数据库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%88%E6%AD%A2%E4%B8%80%E6%9D%A1%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.4.</span> <span class="toc-text">终止一条语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%80%E5%87%BAmysql"><span class="toc-number">2.5.</span> <span class="toc-text">退出mysql</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.6.</span> <span class="toc-text">查看建表语句</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">简单的查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-number">3.1.</span> <span class="toc-text">查询一个字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5"><span class="toc-number">3.2.</span> <span class="toc-text">查询多个字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%85%A8%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="toc-number">3.3.</span> <span class="toc-text">查询全部字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%91%98%E5%B7%A5%E7%9A%84%E5%B9%B4%E8%96%AA"><span class="toc-number">3.4.</span> <span class="toc-text">计算员工的年薪</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E6%9F%A5%E8%AF%A2%E5%87%BA%E6%9D%A5%E7%9A%84%E5%AD%97%E6%AE%B5%E6%98%BE%E7%A4%BA%E4%B8%BA%E4%B8%AD%E6%96%87"><span class="toc-number">3.5.</span> <span class="toc-text">将查询出来的字段显示为中文</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">4.</span> <span class="toc-text">条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AD%89%E5%8F%B7%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.1.</span> <span class="toc-text">等号操作符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lt-gt-%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.2.</span> <span class="toc-text">&lt;&gt;操作符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#between-%E2%80%A6-and-%E2%80%A6%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">4.3.</span> <span class="toc-text">between … and …操作符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#is-null"><span class="toc-number">4.4.</span> <span class="toc-text">is null</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#and"><span class="toc-number">4.5.</span> <span class="toc-text">and</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#or"><span class="toc-number">4.6.</span> <span class="toc-text">or</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">4.7.</span> <span class="toc-text">表达式的优先级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#in"><span class="toc-number">4.8.</span> <span class="toc-text">in</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#not"><span class="toc-number">4.9.</span> <span class="toc-text">not</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#like"><span class="toc-number">4.10.</span> <span class="toc-text">like</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">5.</span> <span class="toc-text">排序数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%B8%80%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F"><span class="toc-number">5.1.</span> <span class="toc-text">单一字段排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E6%8C%87%E5%AE%9A%E6%8E%92%E5%BA%8F%E9%A1%BA%E5%BA%8F"><span class="toc-number">5.2.</span> <span class="toc-text">手动指定排序顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E6%8E%92%E5%BA%8F%E9%A1%BA%E5%BA%8F"><span class="toc-number">5.3.</span> <span class="toc-text">多个字段排序顺序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%97%E6%AE%B5%E7%9A%84%E4%BD%8D%E7%BD%AE%E6%9D%A5%E6%8E%92%E5%BA%8F"><span class="toc-number">5.4.</span> <span class="toc-text">使用字段的位置来排序</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E5%87%BD%E6%95%B0-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0-%E5%A4%9A%E8%A1%8C%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0"><span class="toc-number">6.</span> <span class="toc-text">分组函数&#x2F;聚合函数&#x2F;多行处理函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#count"><span class="toc-number">6.1.</span> <span class="toc-text">count</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sum"><span class="toc-number">6.2.</span> <span class="toc-text">sum</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#avg"><span class="toc-number">6.3.</span> <span class="toc-text">avg</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#max"><span class="toc-number">6.4.</span> <span class="toc-text">max</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#min"><span class="toc-number">6.5.</span> <span class="toc-text">min</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">6.6.</span> <span class="toc-text">组合聚合函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.</span> <span class="toc-text">分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#group-by"><span class="toc-number">7.1.</span> <span class="toc-text">group by</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#having"><span class="toc-number">7.2.</span> <span class="toc-text">having</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#select%E8%AF%AD%E5%8F%A5%E6%80%BB%E7%BB%93"><span class="toc-number">7.3.</span> <span class="toc-text">select语句总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.1.</span> <span class="toc-text">什么是连接查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">8.2.</span> <span class="toc-text">连接查询的分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E8%A1%A8%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2%E6%96%B9%E9%9D%A2%E6%9C%89%E4%B8%80%E7%A7%8D%E7%8E%B0%E8%B1%A1%E8%A2%AB%E7%A7%B0%E4%B8%BA%EF%BC%9A%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1%E3%80%82%EF%BC%88%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF%E7%8E%B0%E8%B1%A1%EF%BC%89"><span class="toc-number">8.3.</span> <span class="toc-text">在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E9%81%BF%E5%85%8D%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF%E7%8E%B0%E8%B1%A1%EF%BC%9F%E5%BD%93%E7%84%B6%E6%98%AF%E5%8A%A0%E6%9D%A1%E4%BB%B6%E8%BF%9B%E8%A1%8C%E8%BF%87%E6%BB%A4%E3%80%82"><span class="toc-number">8.4.</span> <span class="toc-text">怎么避免笛卡尔积现象？当然是加条件进行过滤。</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B9%8B%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.5.</span> <span class="toc-text">内连接之等值连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5%E4%B9%8B%E9%9D%9E%E7%AD%89%E5%80%BC%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.6.</span> <span class="toc-text">内连接之非等值连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.7.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.8.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%89%E5%BC%A0%E8%A1%A8%E6%80%8E%E4%B9%88%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.9.</span> <span class="toc-text">三张表怎么连接查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">9.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%9C%A8where%E8%AF%AD%E5%8F%A5%E4%B8%AD%E5%8A%A0%E5%85%A5select%E8%AF%AD%E5%8F%A5"><span class="toc-number">9.1.</span> <span class="toc-text">在where语句中使用子查询，也就是在where语句中加入select语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8from%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%B0%86%E8%AF%A5%E5%AD%90%E6%9F%A5%E8%AF%A2%E7%9C%8B%E5%81%9A%E4%B8%80%E5%BC%A0%E8%A1%A8"><span class="toc-number">9.2.</span> <span class="toc-text">在from语句中使用子查询，可以将该子查询看做一张表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8select%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">9.3.</span> <span class="toc-text">在select语句中使用子查询</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#union%E5%90%88%E5%B9%B6%E9%9B%86%E5%90%88%EF%BC%88%E7%9B%B8%E5%8A%A0%EF%BC%89"><span class="toc-number">10.</span> <span class="toc-text">union合并集合（相加）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#limit%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">11.</span> <span class="toc-text">limit的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%96%E5%BE%97%E5%89%8D5%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="toc-number">11.1.</span> <span class="toc-text">取得前5条数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8E%E7%AC%AC%E4%BA%8C%E6%9D%A1%E5%BC%80%E5%A7%8B%E5%8F%96%E4%B8%A4%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="toc-number">11.2.</span> <span class="toc-text">从第二条开始取两条数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%96%E5%BE%97%E8%96%AA%E6%B0%B4%E6%9C%80%E9%AB%98%E7%9A%84%E5%89%8D5%E5%90%8D"><span class="toc-number">11.3.</span> <span class="toc-text">取得薪水最高的前5名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">12.</span> <span class="toc-text">表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">12.1.</span> <span class="toc-text">创建表</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95%E6%A0%BC%E5%BC%8F"><span class="toc-number">12.1.1.</span> <span class="toc-text">语法格式</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#MySql%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">12.1.2.</span> <span class="toc-text">MySql常用数据类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E8%A1%A8"><span class="toc-number">12.1.3.</span> <span class="toc-text">建立学生信息表</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%90%91t-student%E8%A1%A8%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">12.1.4.</span> <span class="toc-text">向t_student表中加入数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%90%91t-student%E8%A1%A8%E4%B8%AD%E5%8A%A0%E5%85%A5%E6%95%B0%E6%8D%AE%EF%BC%88%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%89"><span class="toc-number">12.1.5.</span> <span class="toc-text">向t_student表中加入数据（使用默认值）</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0-%E5%88%A0%E9%99%A4-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">12.2.</span> <span class="toc-text">增加&#x2F;删除&#x2F;修改表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5"><span class="toc-number">12.2.1.</span> <span class="toc-text">添加字段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5"><span class="toc-number">12.2.2.</span> <span class="toc-text">修改字段</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5"><span class="toc-number">12.2.3.</span> <span class="toc-text">删除字段</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E3%80%81%E4%BF%AE%E6%94%B9%E5%92%8C%E5%88%A0%E9%99%A4%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">12.3.</span> <span class="toc-text">添加、修改和删除表数据</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#insert"><span class="toc-number">12.3.1.</span> <span class="toc-text">insert</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#update"><span class="toc-number">12.3.2.</span> <span class="toc-text">update</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#delete"><span class="toc-number">12.3.3.</span> <span class="toc-text">delete</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%8A%A0%E5%85%A5%E7%BA%A6%E6%9D%9F"><span class="toc-number">12.4.</span> <span class="toc-text">创建表加入约束</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F%EF%BC%8Cnot-null"><span class="toc-number">12.4.1.</span> <span class="toc-text">非空约束，not null</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F%EF%BC%8Cunique"><span class="toc-number">12.4.2.</span> <span class="toc-text">唯一约束，unique</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%8Cprimary-key"><span class="toc-number">12.4.3.</span> <span class="toc-text">主键约束，primary key</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F%EF%BC%8Cforeign-key"><span class="toc-number">12.4.4.</span> <span class="toc-text">外键约束，foreign key</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BA%A7%E8%81%94%E6%9B%B4%E6%96%B0%E4%B8%8E%E7%BA%A7%E8%81%94%E5%88%A0%E9%99%A4"><span class="toc-number">12.4.5.</span> <span class="toc-text">级联更新与级联删除</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#t-student%E5%92%8Ct-classes%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B"><span class="toc-number">12.5.</span> <span class="toc-text">t_student和t_classes完整示例</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">13.</span> <span class="toc-text">存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84%E5%BB%BA%E8%A1%A8%E8%AF%AD%E5%8F%A5"><span class="toc-number">13.1.</span> <span class="toc-text">完整的建表语句</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%91%A2%EF%BC%9F"><span class="toc-number">13.2.</span> <span class="toc-text">什么是存储引擎呢？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8Dmysql%E6%94%AF%E6%8C%81%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%9F"><span class="toc-number">13.3.</span> <span class="toc-text">查看当前mysql支持的存储引擎？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%9F"><span class="toc-number">13.4.</span> <span class="toc-text">常见的存储引擎？</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E4%BA%8B%E5%8A%A1%EF%BC%9F"><span class="toc-number">14.1.</span> <span class="toc-text">什么是事务？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%92%8C%E4%BA%8B%E5%8A%A1%E7%9B%B8%E5%85%B3%E7%9A%84%E8%AF%AD%E5%8F%A5%E5%8F%AA%E6%9C%89%EF%BC%9ADML%E8%AF%AD%E5%8F%A5%E3%80%82-insert-delete-update"><span class="toc-number">14.2.</span> <span class="toc-text">和事务相关的语句只有：DML语句。(insert delete update)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%81%87%E8%AE%BE%E6%89%80%E6%9C%89%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%83%BD%E8%83%BD%E4%BD%BF%E7%94%A81%E6%9D%A1DML%E8%AF%AD%E5%8F%A5%E6%90%9E%E5%AE%9A%EF%BC%8C%E8%BF%98%E9%9C%80%E8%A6%81%E4%BA%8B%E5%8A%A1%E6%9C%BA%E5%88%B6%E5%90%97%EF%BC%9F"><span class="toc-number">14.3.</span> <span class="toc-text">假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%89%B9%E6%80%A7%EF%BC%9F"><span class="toc-number">14.4.</span> <span class="toc-text">事务的特性？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E4%BA%8B%E5%8A%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%9F"><span class="toc-number">14.5.</span> <span class="toc-text">关于事务之间的隔离性？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%94%E7%A4%BA%E4%BA%8B%E5%8A%A1"><span class="toc-number">14.6.</span> <span class="toc-text">演示事务</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">15.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B4%A2%E5%BC%95%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E7%94%A8%EF%BC%9F"><span class="toc-number">15.1.</span> <span class="toc-text">什么是索引？有什么用？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1%EF%BC%9F%E6%80%8E%E4%B9%88%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1%EF%BC%9F"><span class="toc-number">15.2.</span> <span class="toc-text">怎么创建索引对象？怎么删除索引对象？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%80%83%E8%99%91%E7%BB%99%E5%AD%97%E6%AE%B5%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95%EF%BC%9F-%E6%BB%A1%E8%B6%B3%E4%BB%80%E4%B9%88%E6%9D%A1%E4%BB%B6"><span class="toc-number">15.3.</span> <span class="toc-text">什么时候考虑给字段添加索引？(满足什么条件)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%EF%BC%9A%E4%B8%BB%E9%94%AE%E5%85%B7%E6%9C%89unique%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%AD%97%E6%AE%B5%E4%BC%9A%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E7%B4%A2%E5%BC%95"><span class="toc-number">15.4.</span> <span class="toc-text">注意：主键具有unique约束的字段会自动添加索引</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bsql%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92"><span class="toc-number">15.5.</span> <span class="toc-text">查看sql语句的执行计划</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E9%87%87%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="toc-number">15.6.</span> <span class="toc-text">索引底层采用的数据结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">15.7.</span> <span class="toc-text">索引的实现原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">15.8.</span> <span class="toc-text">索引的分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%A4%B1%E6%95%88%EF%BC%9F"><span class="toc-number">15.9.</span> <span class="toc-text">索引什么时候失效？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%95%E5%9B%BE-View"><span class="toc-number">15.10.</span> <span class="toc-text">试图(View)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%A7%86%E5%9B%BE%EF%BC%9F"><span class="toc-number">15.10.1.</span> <span class="toc-text">什么是视图？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE%EF%BC%9F%E6%80%8E%E4%B9%88%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE%EF%BC%9F"><span class="toc-number">15.10.2.</span> <span class="toc-text">怎么创建视图？怎么删除视图？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AF%B9%E8%AF%95%E5%9B%BE%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%EF%BC%8C%E4%BC%9A%E5%BD%B1%E5%93%8D%E5%88%B0%E5%8E%9F%E8%A1%A8%E6%95%B0%E6%8D%AE%E3%80%82-%E9%80%9A%E8%BF%87%E8%A7%86%E5%9B%BE%E5%BD%B1%E5%93%8D%E5%8E%9F%E8%A1%A8%E6%95%B0%E6%8D%AE%EF%BC%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E6%93%8D%E4%BD%9C%E7%9A%84%E5%8E%9F%E8%A1%A8"><span class="toc-number">15.10.3.</span> <span class="toc-text">对试图进行增删改查，会影响到原表数据。(通过视图影响原表数据，不是直接操作的原表)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%A7%86%E5%9B%BE%E6%93%8D%E4%BD%9C%EF%BC%9F"><span class="toc-number">15.10.4.</span> <span class="toc-text">面向视图操作？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%AF%95%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9F"><span class="toc-number">15.10.5.</span> <span class="toc-text">试图的作用？</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DBA%E5%91%BD%E4%BB%A4"><span class="toc-number">15.11.</span> <span class="toc-text">DBA命令</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%9C%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BD%93%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%87%BA"><span class="toc-number">15.11.1.</span> <span class="toc-text">在数据库当中的数据导出</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE-1"><span class="toc-number">15.11.2.</span> <span class="toc-text">导入数据</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E8%8C%83%E5%BC%8F-%E9%87%8D%E7%82%B9%E5%86%85%E5%AE%B9%EF%BC%8C%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%B8%B8%E4%BC%9A%E9%97%AE"><span class="toc-number">15.12.</span> <span class="toc-text">数据库设计三范式(重点内容，面试经常会问)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%AE%BE%E8%AE%A1%E8%8C%83%E5%BC%8F%EF%BC%9F"><span class="toc-number">15.12.1.</span> <span class="toc-text">什么是设计范式？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%89%E8%8C%83%E5%BC%8F%E9%83%BD%E6%98%AF%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">15.12.2.</span> <span class="toc-text">三范式都是哪些？</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%9F"><span class="toc-number">15.12.3.</span> <span class="toc-text">一对一怎么设计？</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://example.com/2019/04/06/mysql/use/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Baishu"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Baishu的博客"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Mysql的使用</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2019-04-06 19:29:33" itemprop="dateCreated datePublished" datetime="2019-04-06T19:29:33+08:00">2019-04-06</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2019-03-27 22:23:12" itemprop="dateModified" datetime="2019-03-27T22:23:12+08:00">2019-03-27</time></div><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">计算机基础</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">数据库</span></a><a class="tag-item" href="/tags/Mysql/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Mysql</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h4 id="数据库概述"><a href="#数据库概述" class="headerlink" title="数据库概述"></a>数据库概述</h4><h5 id="sql、DB、DBMS分别是什么，他们之间的关系"><a href="#sql、DB、DBMS分别是什么，他们之间的关系" class="headerlink" title="sql、DB、DBMS分别是什么，他们之间的关系"></a><font color="#f2711c">sql、DB、DBMS分别是什么，他们之间的关系</font></h5><ul>
<li>DB：DataBase（数据库，数据库实际上在硬盘上以文件的形式存在）</li>
<li>DBMS：DataBase Management System（数据库管理系统，常见的有：Oracle、SQL Server、MySql、Sybase、informix、DB2、interbase、PostgreSql）</li>
<li>SQL：结构化查询语言，是一门标准通用的语言。标准的sql适合于所有的数据库产品。SQL属于高级语言。SQL语句在执行的时候，实际上内部也会先进行编译，然后再执行sql。（sql语句的编译由DBMS完成）<br>DBMS负责执行sql语句，通过执行sql语句来操作DB当中的数据。 </li>
</ul>
<h5 id="什么是表"><a href="#什么是表" class="headerlink" title="什么是表"></a><font color="#f2711c">什么是表</font></h5><ul>
<li>表： table</li>
<li>表：table是数据库的基本组成单元，所有的数据都以表格的形式组织，目的是可读性强。</li>
<li>一个表包括行和列：</li>
<li>行：被称为数据/记录（data）</li>
<li>列：被称为字段（column）</li>
</ul>
<table>
<thead>
<tr>
<th>学号（int）</th>
<th>姓名（varchar）</th>
<th>年龄</th>
</tr>
</thead>
<tbody><tr>
<td>110</td>
<td>张三</td>
<td>20</td>
</tr>
<tr>
<td>120</td>
<td>李四</td>
<td>21</td>
</tr>
</tbody></table>
<p> 每一个字段应该包括哪些属性？<br> 字段名、数据类型、字段约束/字段长度<br> 字段约束/字段长度</p>
<h5 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a><font color="#f2711c">SQL分类</font></h5><ul>
<li>数据查询语言(DQL-Data Query Language)<br>代表关键字:select </li>
<li>数据操纵语言(DML-Data Manipulation Language)<br>代表关键字:insert,delete,update </li>
<li>数据定义语言(DDL-Data Definition Language)<br>代表关键字:create ,drop,alter,</li>
<li>事务控制语言(TCL-Transactional Control Language)<br>代表关键字:commit ,rollback;</li>
<li>数据控制语言(DCL-Data Control Language)<br>代表关键字:grant,revoke.</li>
</ul>
<h5 id="导入数据"><a href="#导入数据" class="headerlink" title="导入数据"></a><font color="#f2711c">导入数据</font></h5><ul>
<li><p>第一步：登录mysql数据库管理系统<br>命令窗口：</p>
<blockquote>
<p>mysql -uroot -p</p>
</blockquote>
</li>
<li><p>第二步：查看有哪些数据库</p>
<blockquote>
<p>show databases;<br>(这个不是SQL语句，属于Mysql的命令)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| algorithm_box      |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>第三步：创建数据库</p>
<blockquote>
<p>create database baishu_demo;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database baishu_demo;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| algorithm_box      |</span><br><span class="line">| baishu_demo        |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| sys                |</span><br><span class="line">+--------------------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>第四步：使用baishu_demo数据</p>
<blockquote>
<p>use baishu_demo;</p>
</blockquote>
</li>
<li><p>第五步：查看当前使用的数据中有哪些表？</p>
<blockquote>
<p>show tables;</p>
</blockquote>
</li>
<li><p>第六步：初始化数据</p>
<blockquote>
<p>source ~/sql/baishu_demo.sql;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+-----------------------+</span><br><span class="line">| Tables_in_baishu_demo |</span><br><span class="line">+-----------------------+</span><br><span class="line">| DEPT                  |</span><br><span class="line">| EMP                   |</span><br><span class="line">| SALGRADE              |</span><br><span class="line">+-----------------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="什么是sql脚本？"><a href="#什么是sql脚本？" class="headerlink" title="什么是sql脚本？"></a><font color="#f2711c">什么是sql脚本？</font></h5><ul>
<li>当一个文件的扩展名是.sql，并且该文件中编写了大量的sql语句，我们称这样的文件为sql脚本。<br>sql脚本中的数据量太大的时候，无法打开，请使用source命令完成初始化。</li>
</ul>
<h5 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a><font color="#f2711c">删除数据库</font></h5><blockquote>
<p>drop database baishu_demo;</p>
</blockquote>
<h5 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a><font color="#f2711c">查看表结构</font></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------+</span><br><span class="line">| Tables_in_baishu_demo |</span><br><span class="line">+-----------------------+</span><br><span class="line">| DEPT                  | （部门表）</span><br><span class="line">| EMP                   | （员工表）</span><br><span class="line">| SALGRADE              | （工资等级表）</span><br><span class="line">+-----------------------+</span><br><span class="line"></span><br><span class="line">mysql&gt; desc DEPT;</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field  | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">| DEPTNO | int(2)      | NO   | PRI | NULL    |       | 部门编号</span><br><span class="line">| DNAME  | varchar(14) | YES  |     | NULL    |       | 部门名称</span><br><span class="line">| LOC    | varchar(13) | YES  |     | NULL    |       | 部门位置</span><br><span class="line">+--------+-------------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc EMP;</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra |</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">| EMPNO    | int(4)      | NO   | PRI | NULL    |       | 员工编号</span><br><span class="line">| ENAME    | varchar(10) | YES  |     | NULL    |       | 员工姓名</span><br><span class="line">| JOB      | varchar(9)  | YES  |     | NULL    |       | 工作岗位</span><br><span class="line">| MGR      | int(4)      | YES  |     | NULL    |       | 上级领导编号</span><br><span class="line">| HIREDATE | date        | YES  |     | NULL    |       | 入职时间</span><br><span class="line">| SAL      | double(7,2) | YES  |     | NULL    |       | 月薪</span><br><span class="line">| COMM     | double(7,2) | YES  |     | NULL    |       | 补助/津贴</span><br><span class="line">| DEPTNO   | int(2)      | YES  |     | NULL    |       | 部门编号</span><br><span class="line">+----------+-------------+------+-----+---------+-------+</span><br><span class="line">8 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc SALGRADE;</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| Field | Type    | Null | Key | Default | Extra |</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">| GRADE | int(11) | YES  |     | NULL    |       | 等级</span><br><span class="line">| LOSAL | int(11) | YES  |     | NULL    |       | 最低薪资</span><br><span class="line">| HISAL | int(11) | YES  |     | NULL    |       | 最高薪资</span><br><span class="line">+-------+---------+------+-----+---------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from EMP;</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="查看mysql版本"><a href="#查看mysql版本" class="headerlink" title="查看mysql版本"></a><font color="#f2711c">查看mysql版本</font></h5><blockquote>
<p>mysql -V<br>mysql –version</p>
</blockquote>
<h5 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a><font color="#f2711c">创建数据库</font></h5><blockquote>
<p>1.create database 数据库名称;<br>create database baishu_demo;<br>2.use 数据库名称<br>use baishu_demo;<br>在数据库中建立表，因此创建表的时候必须要先选择数据库。</p>
</blockquote>
<h5 id="查询当前使用的数据库"><a href="#查询当前使用的数据库" class="headerlink" title="查询当前使用的数据库"></a><font color="#f2711c">查询当前使用的数据库</font></h5><blockquote>
<p>select  database();<br>查询数据库版本也可以使用<br>select  version();</p>
</blockquote>
<h5 id="终止一条语句"><a href="#终止一条语句" class="headerlink" title="终止一条语句"></a><font color="#f2711c">终止一条语句</font></h5><p>如果想要终止一条正在编写的语句，可键入\c。</p>
<h5 id="退出mysql"><a href="#退出mysql" class="headerlink" title="退出mysql"></a><font color="#f2711c">退出mysql</font></h5><p>可使用\q、QUIT或EXIT</p>
<h5 id="查看建表语句"><a href="#查看建表语句" class="headerlink" title="查看建表语句"></a><font color="#f2711c">查看建表语句</font></h5><blockquote>
<p>show create table table name;</p>
</blockquote>
<h4 id="简单的查询"><a href="#简单的查询" class="headerlink" title="简单的查询"></a>简单的查询</h4><p>语法格式:select 字段名1,字段名2,字段名3,…from 表名;</p>
<blockquote>
<p>提示：<br>1.任何一条sql语句以“；”结尾。<br>2.sql语句不区分大小写。</p>
</blockquote>
<h5 id="查询一个字段"><a href="#查询一个字段" class="headerlink" title="查询一个字段"></a><font color="#f2711c">查询一个字段</font></h5><blockquote>
<p>select ename from EMP;</p>
</blockquote>
<p>Select语句后面跟的是字段名称，select是关键字，select和字段名称之间采用空格隔开，from表示将要查询的表，它和字段之间采用空格隔开</p>
<h5 id="查询多个字段"><a href="#查询多个字段" class="headerlink" title="查询多个字段"></a><font color="#f2711c">查询多个字段</font></h5><blockquote>
<p>select empnp, ename from EMP;</p>
</blockquote>
<p>查询多个字段，select中的字段采用逗号间隔即可，最后一个字段，也就是在from前面的字段不能使用逗号了。</p>
<h5 id="查询全部字段"><a href="#查询全部字段" class="headerlink" title="查询全部字段"></a><font color="#f2711c">查询全部字段</font></h5><blockquote>
<p>select * from EMP;</p>
</blockquote>
<p>采用select * from emp，虽然简单，但是*号不是很明确，建议查询全部字段将相关字段写到select语句的后面,在以后java连接数据库的时候,是需要在java程序中编写SQL语句的,这个时候编写的SQL语句不建议使用select *  这种形式,建议写明字段,这样可读性强.</p>
<h5 id="计算员工的年薪"><a href="#计算员工的年薪" class="headerlink" title="计算员工的年薪"></a><font color="#f2711c">计算员工的年薪</font></h5><p>列出员工的编号，姓名和年薪</p>
<blockquote>
<p>select empno, ename, sal*12 from EMP;</p>
</blockquote>
<h5 id="将查询出来的字段显示为中文"><a href="#将查询出来的字段显示为中文" class="headerlink" title="将查询出来的字段显示为中文"></a><font color="#f2711c">将查询出来的字段显示为中文</font></h5><blockquote>
<p>select empno as ‘员工编号’, ename as ‘员工姓名’, sal*12 as ‘年薪’ from EMP;</p>
</blockquote>
<p>注意:字符串必须添加单引号 | 双引号</p>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>语法格式：</p>
<blockquote>
<p>select<br>  字段，字段…<br>from<br>  表名<br>where<br>  条件<br>执行顺序：先from，然后where，最后select</p>
</blockquote>
<ol>
<li><p>找出工资高于3000的员工<br>select ename,sal from EMP where sal &gt;= 3000;</p>
</li>
<li><p>查询SMITH的工资<br>select sal from EMP where ename = ‘SMITH’</p>
</li>
<li><p>找出工资在1100和3000之间的员工<br>select ename from EMP where sal between 1100 and 3000 (between and 是闭区间)</p>
</li>
</ol>
<p>支持如下运算符：</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>=</td>
<td>等于</td>
</tr>
<tr>
<td>&lt;&gt; 或 !=</td>
<td>不等于</td>
</tr>
<tr>
<td>&lt;</td>
<td>小于</td>
</tr>
<tr>
<td>&lt;=</td>
<td>小于等于</td>
</tr>
<tr>
<td>&gt;</td>
<td>大于</td>
</tr>
<tr>
<td>&gt;=</td>
<td>大于等于</td>
</tr>
<tr>
<td>between…and…</td>
<td>大于等于，等同&gt;= and &lt;=</td>
</tr>
<tr>
<td>is null</td>
<td>为null(is not null 不为空)</td>
</tr>
<tr>
<td>and</td>
<td>并且</td>
</tr>
<tr>
<td>or</td>
<td>或者</td>
</tr>
<tr>
<td>in</td>
<td>包含，相当于多个or(not in 不在这个范围中)</td>
</tr>
<tr>
<td>not</td>
<td>not 可以取非，主要用在is 或 in 中</td>
</tr>
<tr>
<td>like</td>
<td>like称为模糊查询，支持%或下划线匹配；%匹配任意个字符，下划线，一个下滑下只匹配一个字符</td>
</tr>
</tbody></table>
<h5 id="等号操作符"><a href="#等号操作符" class="headerlink" title="等号操作符"></a><font color="#f2711c">等号操作符</font></h5><ul>
<li>查询job为MANAGER的员工<blockquote>
<p>select empno,ename,job from EMP where job = ‘manager’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select empno,ename,job from EMP where job = &#x27;manager&#x27;;</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">| empno | ename | job     |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">|  7566 | JONES | MANAGER |</span><br><span class="line">|  7698 | BLAKE | MANAGER |</span><br><span class="line">|  7782 | CLARK | MANAGER |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="lt-gt-操作符"><a href="#lt-gt-操作符" class="headerlink" title="&lt;&gt;操作符"></a><font color="#f2711c">&lt;&gt;操作符</font></h5></li>
<li>查询薪水不等于5000的员工<blockquote>
<p>select empno,ename,sal from EMP where sal&lt;&gt;5000;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">1. mysql&gt; select empno,ename,sal from EMP where sal&lt;&gt;5000;</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">| empno | ename  | sal     |</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">|  7369 | SMITH  |  800.00 |</span><br><span class="line">|  7499 | ALLEN  | 1600.00 |</span><br><span class="line">|  7521 | WARD   | 1250.00 |</span><br><span class="line">|  7566 | JONES  | 2975.00 |</span><br><span class="line">|  7654 | MARTIN | 1250.00 |</span><br><span class="line">|  7698 | BLAKE  | 2850.00 |</span><br><span class="line">|  7782 | CLARK  | 2450.00 |</span><br><span class="line">|  7788 | SCOTT  | 3000.00 |</span><br><span class="line">|  7844 | TURNER | 1500.00 |</span><br><span class="line">|  7876 | ADAMS  | 1100.00 |</span><br><span class="line">|  7900 | JAMES  |  950.00 |</span><br><span class="line">|  7902 | FORD   | 3000.00 |</span><br><span class="line">|  7934 | MILLER | 1300.00 |</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2. mysql&gt; select empno, ename, sal from EMP where sal != 5000;</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">| empno | ename  | sal     |</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">|  7369 | SMITH  |  800.00 |</span><br><span class="line">|  7499 | ALLEN  | 1600.00 |</span><br><span class="line">|  7521 | WARD   | 1250.00 |</span><br><span class="line">|  7566 | JONES  | 2975.00 |</span><br><span class="line">|  7654 | MARTIN | 1250.00 |</span><br><span class="line">|  7698 | BLAKE  | 2850.00 |</span><br><span class="line">|  7782 | CLARK  | 2450.00 |</span><br><span class="line">|  7788 | SCOTT  | 3000.00 |</span><br><span class="line">|  7844 | TURNER | 1500.00 |</span><br><span class="line">|  7876 | ADAMS  | 1100.00 |</span><br><span class="line">|  7900 | JAMES  |  950.00 |</span><br><span class="line">|  7902 | FORD   | 3000.00 |</span><br><span class="line">|  7934 | MILLER | 1300.00 |</span><br><span class="line">+-------+--------+---------+</span><br><span class="line">13 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="between-…-and-…操作符"><a href="#between-…-and-…操作符" class="headerlink" title="between … and …操作符"></a><font color="#f2711c">between … and …操作符</font></h5><ul>
<li>查询薪水为1600到3000的员工(第一种方式，采用&gt;=和&lt;=)<blockquote>
<p>select empno, ename, sal from EMP where sal between 1600 and 3000;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select empno, ename, sal from EMP where sal between 1600 and 3000;</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">| empno | ename | sal     |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">|  7499 | ALLEN | 1600.00 |</span><br><span class="line">|  7566 | JONES | 2975.00 |</span><br><span class="line">|  7698 | BLAKE | 2850.00 |</span><br><span class="line">|  7782 | CLARK | 2450.00 |</span><br><span class="line">|  7788 | SCOTT | 3000.00 |</span><br><span class="line">|  7902 | FORD  | 3000.00 |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="is-null"><a href="#is-null" class="headerlink" title="is null"></a><font color="#f2711c">is null</font></h5><p>Null为空，但不是空串，为null可以设置这个字段不填值，如果查询为null的字段，采用 is null</p>
<ul>
<li>查询津贴为空的员工<blockquote>
<p>select * from EMP where comm=null;<br>mysql&gt; select * from EMP where COMM is null;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where comm=null;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line">mysql&gt; select * from EMP where COMM is null;</span><br><span class="line">+-------+--------+-----------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 | NULL |     20 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 | NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL |     10 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 | NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 | NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 | NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+------+--------+</span><br><span class="line">10 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="and"><a href="#and" class="headerlink" title="and"></a><font color="#f2711c">and</font></h5><p>and表示并且的含义，表示所有的条件必须满足</p>
<ul>
<li>工作岗位为MANAGER,薪水大于2500的员工<blockquote>
<p>select ename from EMP where job = ‘manager’ and sal &gt; 2500</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ename from EMP where job = &#x27;manager&#x27; and sal &gt; 2500;</span><br><span class="line">+-------+</span><br><span class="line">| ename |</span><br><span class="line">+-------+</span><br><span class="line">| JONES |</span><br><span class="line">| BLAKE |</span><br><span class="line">+-------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="or"><a href="#or" class="headerlink" title="or"></a><font color="#f2711c">or</font></h5><p>or，只要满足条件即可,相当于包含</p>
<ul>
<li>查询出job为manager或者job为salesman的员工<blockquote>
<p>select * from EMP where job = ‘manager’ or job = ‘salesman’;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where job = &#x27;manager&#x27; or job = &#x27;salesman&#x27;;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER  | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER  | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">7 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="表达式的优先级"><a href="#表达式的优先级" class="headerlink" title="表达式的优先级"></a><font color="#f2711c">表达式的优先级</font></h5><p>关于运算符的问题：不用记，没有把握尽量采用括号</p>
<ul>
<li>查询薪水大于1800，并且部门代码为20或30的员工<blockquote>
<p>select * from EMP where sal &gt; 1800 and (DEPTNO = 20 or DEPTNO = 30);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where sal &gt; 1800 and (DEPTNO = 20 or DEPTNO = 30);</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB     | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">|  7566 | JONES | MANAGER | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">|  7698 | BLAKE | MANAGER | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">|  7788 | SCOTT | ANALYST | 7566 | 1987-04-19 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7902 | FORD  | ANALYST | 7566 | 1981-12-03 | 3000.00 | NULL |     20 |</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="in"><a href="#in" class="headerlink" title="in"></a><font color="#f2711c">in</font></h5><p>in表示包含的意思，完全可以采用or来表示，采用in会更简洁一些</p>
<ul>
<li><p>查询出job为manager或者job为salesman或者job为clerk的员工</p>
<blockquote>
<p>select * from EMP where job in (‘manager’,’salesman’,’clerk’);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where job in (&#x27;manager&#x27;,&#x27;salesman&#x27;,&#x27;clerk&#x27;);</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK    | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER  | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER  | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK    | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK    | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK    | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">11 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>查询出薪水包含1600和薪水包含3000的员工</p>
<blockquote>
<p>select * from EMP where sal in (1600,3000);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where sal in (1600,3000);</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB      | MGR  | HIREDATE   | SAL     | COMM   | DEPTNO |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">|  7499 | ALLEN | SALESMAN | 7698 | 1981-02-20 | 1600.00 | 300.00 |     30 |</span><br><span class="line">|  7788 | SCOTT | ANALYST  | 7566 | 1987-04-19 | 3000.00 |   NULL |     20 |</span><br><span class="line">|  7902 | FORD  | ANALYST  | 7566 | 1981-12-03 | 3000.00 |   NULL |     20 |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>in 子句中是变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">d.matCodes: 为数组</span><br><span class="line">var _matCodes = d.matCodes.toString();</span><br><span class="line">var _orderId = d.orderId</span><br><span class="line">var sqlCapacity = `select * from MATDB where Matcode in (?) AND ORDERID = &#x27;$&#123;_orderId&#125;&#x27;`</span><br><span class="line">connection.query(sqlCapacity,[d.matCodes], function(err, results) &#123;</span><br><span class="line">  if(err) &#123;</span><br><span class="line">    return res.json(&#123;</span><br><span class="line">        code: -2,</span><br><span class="line">        message: &#x27;查询失败&#x27;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  res.json(&#123;</span><br><span class="line">      code: 200,</span><br><span class="line">      message: &#x27;查询成功&#x27;,</span><br><span class="line">      data: results,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="not"><a href="#not" class="headerlink" title="not"></a><font color="#f2711c">not</font></h5><ul>
<li><p>查询出薪水不包含1600和薪水不包含3000的员工</p>
<blockquote>
<p>select * from EMP where sal &lt;&gt; 1600 and sal &lt;&gt; 3000;<br>select * from EMP where not (sal = 1600 or sal = 3000);<br>select * from EMP where sal not in (1600, 3000);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where sal not in (1600, 3000);</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">11 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>查询出津贴不为null的所有员工</p>
<blockquote>
<p>select * from EMP where comm is not null;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where comm is not null;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="like"><a href="#like" class="headerlink" title="like"></a><font color="#f2711c">like</font></h5><p>Like可以实现模糊查询，like支持%和下划线匹配</p>
<ul>
<li><p>查询姓名以M开头所有的员工<br>select * from EMP where ename like ‘M%’;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where ename like &#x27;M%&#x27;;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK    | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>查询姓名以N结尾的所有的员工</p>
<blockquote>
<p>select * from EMP where ename like ‘%N’;</p>
</blockquote>
</li>
<li><p>查询姓名中包含O的所有的员工</p>
<blockquote>
<p>select * from EMP where ename like ‘%O%’;</p>
</blockquote>
</li>
<li><p>查询姓名中第二个字符为A的所有员工</p>
<blockquote>
<p>select * from EMP where ename like ‘_A%’;</p>
</blockquote>
</li>
</ul>
<p><font color="red">Like中%和下划线的差别？<br>%匹配任意字符出现的个数，下划线只匹配一个字符，Like 中的表达式必须放到单引号中|双引号中</font></p>
<h4 id="排序数据"><a href="#排序数据" class="headerlink" title="排序数据"></a>排序数据</h4><h5 id="单一字段排序"><a href="#单一字段排序" class="headerlink" title="单一字段排序"></a><font color="#f2711c">单一字段排序</font></h5><p>排序采用order by子句，order by后面跟上排序字段，排序字段可以放多个，多个采用逗号间隔，order by默认采用升序，如果存在where子句那么order by必须放到where语句的后面</p>
<ul>
<li><p>按照薪水由小到大排序(系统默认由小到大)</p>
<blockquote>
<p>select * from EMP order by sal;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP order by sal;</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>取得job为MANAGER的员工，按照薪水由小到大排序(系统默认由小到大)</p>
<blockquote>
<p>select * from EMP where job = ‘manager’ order by sal;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where job = &#x27;manager&#x27; order by sal;</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB     | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">|  7782 | CLARK | MANAGER | 7839 | 1981-06-09 | 2450.00 | NULL |     10 |</span><br><span class="line">|  7698 | BLAKE | MANAGER | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">|  7566 | JONES | MANAGER | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">+-------+-------+---------+------+------------+---------+------+--------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>如果包含where语句order by必须放到where后面，如果没有where语句order by放到表的后面</p>
</li>
<li><p>按照多个字段排序，如：首先按照job排序，再按照sal排序</p>
<blockquote>
<p>select * from EMP order by job,sal;</p>
</blockquote>
</li>
</ul>
<h5 id="手动指定排序顺序"><a href="#手动指定排序顺序" class="headerlink" title="手动指定排序顺序"></a><font color="#f2711c">手动指定排序顺序</font></h5><ul>
<li>按照薪水由小到大排序,从大到小<blockquote>
<p>select * from EMP order by sal asc;<br>select * from EMP order by sal desc;<br>mysql&gt; select * from EMP order by sal asc;</p>
</blockquote>
</li>
</ul>
<p>+——-+——–+———–+——+————+———+———+——–+<br>| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |<br>+——-+——–+———–+——+————+———+———+——–+<br>|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |<br>|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |<br>|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |<br>|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |<br>|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |<br>|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |<br>|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |<br>|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |<br>|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |<br>|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |<br>|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |<br>|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |<br>|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |<br>|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |<br>+——-+——–+———–+——+————+———+———+——–+<br>14 rows in set (0.00 sec)</p>
<h5 id="多个字段排序顺序"><a href="#多个字段排序顺序" class="headerlink" title="多个字段排序顺序"></a><font color="#f2711c">多个字段排序顺序</font></h5><ul>
<li>按照job和薪水倒序<blockquote>
<p>select * from EMP order by job desc, sal desc;<br>如果采用多个字段排序，如果根据第一个字段排序重复了，会根据第二个字段排序</p>
</blockquote>
</li>
</ul>
<h5 id="使用字段的位置来排序"><a href="#使用字段的位置来排序" class="headerlink" title="使用字段的位置来排序"></a><font color="#f2711c">使用字段的位置来排序</font></h5><ul>
<li>按照薪水升序<blockquote>
<p>select * from EMP order by 6;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP order by 6;</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
不建议使用此种方式，采用数字含义不明确，程序不健壮</li>
</ul>
<h4 id="分组函数-聚合函数-多行处理函数"><a href="#分组函数-聚合函数-多行处理函数" class="headerlink" title="分组函数/聚合函数/多行处理函数"></a>分组函数/聚合函数/多行处理函数</h4><table>
<thead>
<tr>
<th>函数</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count</td>
<td>取得记录数</td>
</tr>
<tr>
<td>sum</td>
<td>求和</td>
</tr>
<tr>
<td>avg</td>
<td>取平均</td>
</tr>
<tr>
<td>max</td>
<td>取最大的数</td>
</tr>
<tr>
<td>min</td>
<td>取最小的数</td>
</tr>
<tr>
<td>注意：</td>
<td></td>
</tr>
</tbody></table>
<ol>
<li>分组函数自动忽略空值，不需要手动的加where条件排除空值；</li>
<li>分组函数不能直接使用在where关键字后面。<h5 id="count"><a href="#count" class="headerlink" title="count"></a><font color="#f2711c">count</font></h5></li>
</ol>
<ul>
<li><p>取得所有的员工数</p>
<blockquote>
<p>select count(*) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*) from EMP;</span><br><span class="line">+----------+</span><br><span class="line">| count(*) |</span><br><span class="line">+----------+</span><br><span class="line">|       14 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>Count(*)表示取得所有记录，忽略null，为null的值也会取得</p>
</li>
<li><p>取得津贴不为null员工数</p>
<blockquote>
<p>select count(comm) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(comm) from EMP;</span><br><span class="line">+-------------+</span><br><span class="line">| count(comm) |</span><br><span class="line">+-------------+</span><br><span class="line">|           4 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>采用count(字段名称)，不会取得为null的记录</p>
</li>
<li><p>取得工作岗位的个数</p>
<blockquote>
<p>select count(distinct job) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(distinct job) from EMP;</span><br><span class="line">+---------------------+</span><br><span class="line">| count(distinct job) |</span><br><span class="line">+---------------------+</span><br><span class="line">|                   5 |</span><br><span class="line">+---------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="sum"><a href="#sum" class="headerlink" title="sum"></a><font color="#f2711c">sum</font></h5><p>Sum可以取得某一个列的和，null会被忽略</p>
</li>
<li><p>取得薪水的合计</p>
<blockquote>
<p>select sum(sal) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sum(sal) from EMP;</span><br><span class="line">+----------+</span><br><span class="line">| sum(sal) |</span><br><span class="line">+----------+</span><br><span class="line">| 29025.00 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>取得津贴的合计</p>
<blockquote>
<p>select sum(comm) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sum(comm) from EMP;</span><br><span class="line">+-----------+</span><br><span class="line">| sum(comm) |</span><br><span class="line">+-----------+</span><br><span class="line">|   2200.00 |</span><br><span class="line">+-----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>null会被忽略</p>
</li>
<li><p>取得薪水的合计</p>
</li>
<li><p>select sum(sal+comm) from EMP;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sum(sal+comm) from EMP;</span><br><span class="line">+---------------+</span><br><span class="line">| sum(sal+comm) |</span><br><span class="line">+---------------+</span><br><span class="line">|       7800.00 |</span><br><span class="line">+---------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>从以上结果来看，不正确，原因在于comm字段有null值，所以无法计算，sum会忽略掉，正确的做法是将comm字段转换成0</p>
<blockquote>
<p>select sum(sal+IFNULL(comm, 0)) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select sum(sal+IFNULL(comm, 0)) from EMP;</span><br><span class="line">+--------------------------+</span><br><span class="line">| sum(sal+IFNULL(comm, 0)) |</span><br><span class="line">+--------------------------+</span><br><span class="line">|                 31225.00 |</span><br><span class="line">+--------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="avg"><a href="#avg" class="headerlink" title="avg"></a><font color="#f2711c">avg</font></h5><p>取得某一列的平均值</p>
<ul>
<li>取得平均薪水<blockquote>
<p>select avg(sal) feom EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select avg(sal) from EMP;</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="max"><a href="#max" class="headerlink" title="max"></a><font color="#f2711c">max</font></h5>取得某个一列的最大值</li>
<li>取得最高薪水<blockquote>
<p>mysql&gt; select max(sal) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select max(sal) from EMP;</span><br><span class="line">+----------+</span><br><span class="line">| max(sal) |</span><br><span class="line">+----------+</span><br><span class="line">|  5000.00 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li>取得最晚入职得员工<blockquote>
<p>select max(str_to_date (hiredate, ‘%Y-%m-%d’)) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select max(str_to_date (hiredate, &#x27;%Y-%m-%d&#x27;)) from EMP;</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| max(str_to_date (hiredate, &#x27;%Y-%m-%d&#x27;)) |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">| 1987-05-23                              |</span><br><span class="line">+-----------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="min"><a href="#min" class="headerlink" title="min"></a><font color="#f2711c">min</font></h5><p>取得某个一列的最小值</p>
<ul>
<li><p>取得最低薪水</p>
<blockquote>
<p>select min(sal) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select min(sal) from EMP;</span><br><span class="line">+----------+</span><br><span class="line">| min(sal) |</span><br><span class="line">+----------+</span><br><span class="line">|   800.00 |</span><br><span class="line">+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>取得最早入职的员工（可以不使用str_to_date转换）</p>
<blockquote>
<p>select min(str_to_date(hiredate, ‘%Y-%m-%d’)) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select min(str_to_date(hiredate, &#x27;%Y-%m-%d&#x27;)) from EMP;</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| min(str_to_date(hiredate, &#x27;%Y-%m-%d&#x27;)) |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">| 1980-12-17                             |</span><br><span class="line">+----------------------------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="组合聚合函数"><a href="#组合聚合函数" class="headerlink" title="组合聚合函数"></a><font color="#f2711c">组合聚合函数</font></h5><p>可以将这些聚合函数都放到select中一起使用</p>
<blockquote>
<p>select count(*),sum(sal),avg(sal),max(sal),min(sal) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select count(*),sum(sal),avg(sal),max(sal),min(sal) from EMP;</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line">| count(*) | sum(sal) | avg(sal)    | max(sal) | min(sal) |</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line">|       14 | 29025.00 | 2073.214286 |  5000.00 |   800.00 |</span><br><span class="line">+----------+----------+-------------+----------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>分组查询主要涉及到两个子句，分别是：group by和having</p>
<h5 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a><font color="#f2711c">group by</font></h5><ul>
<li>取得每个工作岗位的工资合计，要求显示岗位名称和工资合计<blockquote>
<p>select job,sum(sal) from EMP group by job;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select job,sum(sal) from EMP group by job;</span><br><span class="line">+-----------+----------+</span><br><span class="line">| job       | sum(sal) |</span><br><span class="line">+-----------+----------+</span><br><span class="line">| ANALYST   |  6000.00 |</span><br><span class="line">| CLERK     |  4150.00 |</span><br><span class="line">| MANAGER   |  8275.00 |</span><br><span class="line">| PRESIDENT |  5000.00 |</span><br><span class="line">| SALESMAN  |  5600.00 |</span><br><span class="line">+-----------+----------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
如果使用了order by，order by必须放到group by后面</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select job,sum(sal) from EMP order by job group by job;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;group by job&#x27; at line 1</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select job,sum(sal) from EMP group by job order by job;</span><br><span class="line">+-----------+----------+</span><br><span class="line">| job       | sum(sal) |</span><br><span class="line">+-----------+----------+</span><br><span class="line">| ANALYST   |  6000.00 |</span><br><span class="line">| CLERK     |  4150.00 |</span><br><span class="line">| MANAGER   |  8275.00 |</span><br><span class="line">| PRESIDENT |  5000.00 |</span><br><span class="line">| SALESMAN  |  5600.00 |</span><br><span class="line">+-----------+----------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li>按照工作岗位和码分组，取得的工资合计<blockquote>
<p>select job,deptno,sum(sal) from EMP group by job,deptno;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP;</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">14 rows in set (0.00 sec)</span><br><span class="line">以上SQL语句在Oracle数据库中无法执行，执行报错。</span><br><span class="line">以上SQL语句在Mysql数据库中可以执行，但是执行结果矛盾。</span><br><span class="line">在SQL语句中若有group by 语句，那么在select语句后面只能跟分组函数+参与分组的字段。</span><br><span class="line"></span><br><span class="line">mysql&gt; select job,deptno,sum(sal) from EMP group by job,deptno;</span><br><span class="line">+-----------+--------+----------+</span><br><span class="line">| job       | deptno | sum(sal) |</span><br><span class="line">+-----------+--------+----------+</span><br><span class="line">| ANALYST   |     20 |  6000.00 |</span><br><span class="line">| CLERK     |     10 |  1300.00 |</span><br><span class="line">| CLERK     |     20 |  1900.00 |</span><br><span class="line">| CLERK     |     30 |   950.00 |</span><br><span class="line">| MANAGER   |     10 |  2450.00 |</span><br><span class="line">| MANAGER   |     20 |  2975.00 |</span><br><span class="line">| MANAGER   |     30 |  2850.00 |</span><br><span class="line">| PRESIDENT |     10 |  5000.00 |</span><br><span class="line">| SALESMAN  |     30 |  5600.00 |</span><br><span class="line">+-----------+--------+----------+</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="having"><a href="#having" class="headerlink" title="having"></a><font color="#f2711c">having</font></h5>如果想对分组数据再进行过滤需要使用having子句</li>
<li>取得每个岗位的平均工资大于2000<blockquote>
<p>select job,avg(sal) from EMP group by job having avg(sal) &gt; 2000;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select job,avg(sal) from EMP group by job where avg(sal) &gt; 2000;</span><br><span class="line">ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;where avg(sal) &gt; 2000&#x27; at line 1</span><br><span class="line">mysql&gt; select job,avg(sal) from EMP group by job having avg(sal) &gt; 2000;</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| job       | avg(sal)    |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">| ANALYST   | 3000.000000 |</span><br><span class="line">| MANAGER   | 2758.333333 |</span><br><span class="line">| PRESIDENT | 5000.000000 |</span><br><span class="line">+-----------+-------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
分组函数的执行顺序：<br>根据条件查询数据<br>分组<br>采用having过滤，取得正确的数据</li>
</ul>
<h5 id="select语句总结"><a href="#select语句总结" class="headerlink" title="select语句总结"></a><font color="#f2711c">select语句总结</font></h5><p>一个完整的select语句格式如下： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select 字段</span><br><span class="line">from 表名</span><br><span class="line">where …….</span><br><span class="line">group by ……..</span><br><span class="line">having …….(就是为了过滤分组后的数据而存在的—不可以单独的出现)</span><br><span class="line">order by ……..</span><br></pre></td></tr></table></figure>
<p>以上语句的执行顺序<br>1.首先执行where语句过滤原始数据<br>2.执行group by进行分组<br>3.执行having对分组数据进行操作<br>4.执行select选出数据<br>5.执行order by排序</p>
<p>原则：能在where中过滤的数据，尽量在where中过滤，效率较高。having的过滤是专门对分组之后的数据进行过滤的。</p>
<h4 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h4><h5 id="什么是连接查询"><a href="#什么是连接查询" class="headerlink" title="什么是连接查询"></a><font color="#f2711c">什么是连接查询</font></h5><p>在实际开发中，大部分的情况下都不是从单表中查询数据，一般都是多张表联合查询取出最终的结果。<br>在实际开发中，一般一个业务都会对应多张表，比如：学生和班级，起码两张表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">stuno		stuname			classno		classname</span><br><span class="line">	-----------------------------------------------------------------------------------</span><br><span class="line">	1			zs					1				北京大兴区亦庄经济技术开发区第二中学高三1班</span><br><span class="line">	2			ls					1				北京大兴区亦庄经济技术开发区第二中学高三1班</span><br><span class="line">	...</span><br><span class="line">	学生和班级信息存储到一张表中，结果就像上面一样，数据会存在大量的重复，导致数据的冗余。</span><br></pre></td></tr></table></figure>

<h5 id="连接查询的分类"><a href="#连接查询的分类" class="headerlink" title="连接查询的分类"></a><font color="#f2711c">连接查询的分类</font></h5><ul>
<li><p>根据语法出现的年代来划分的话，包括：</p>
<blockquote>
<p>SQL92（一些老的DBA可能还在使用这种语法。DBA：DataBase Administrator，数据库管理员）<br>SQL99（比较新的语法）</p>
</blockquote>
</li>
<li><p>根据表的连接方式来划分，包括：</p>
<blockquote>
<p>内连接：</p>
<pre><code>等值连接
非等值连接
自连接
</code></pre>
<p>外连接：</p>
<pre><code>左外连接（左连接）
右外连接（右连接）
</code></pre>
<p>全连接（这个不讲，很少用！）</p>
</blockquote>
</li>
</ul>
<h5 id="在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）"><a href="#在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）" class="headerlink" title="在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）"></a><font color="#f2711c">在表的连接查询方面有一种现象被称为：笛卡尔积现象。（笛卡尔乘积现象）</font></h5><p>案例：找出每一个员工的部门名称，要求显示员工名和部门名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">EMP表</span><br><span class="line">+--------+--------+</span><br><span class="line">| ename  | deptno |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  |     20 |</span><br><span class="line">| ALLEN  |     30 |</span><br><span class="line">| WARD   |     30 |</span><br><span class="line">| JONES  |     20 |</span><br><span class="line">| MARTIN |     30 |</span><br><span class="line">| BLAKE  |     30 |</span><br><span class="line">| CLARK  |     10 |</span><br><span class="line">| SCOTT  |     20 |</span><br><span class="line">| KING   |     10 |</span><br><span class="line">| TURNER |     30 |</span><br><span class="line">| ADAMS  |     20 |</span><br><span class="line">| JAMES  |     30 |</span><br><span class="line">| FORD   |     20 |</span><br><span class="line">| MILLER |     10 |</span><br><span class="line">+--------+--------+</span><br><span class="line"></span><br><span class="line">DEPT表</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line"></span><br><span class="line">select ename,dname from emp,dept;</span><br><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| SMITH  | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| SMITH  | SALES      |</span><br><span class="line">| SMITH  | OPERATIONS |</span><br><span class="line">| ALLEN  | ACCOUNTING |</span><br><span class="line">| ALLEN  | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| ALLEN  | OPERATIONS |</span><br><span class="line">............</span><br><span class="line">56 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<blockquote>
<p> 笛卡尔积现象：当两张表进行连接查询的时候，没有任何条件进行限制，最终的查询结果条数是两张表记录条数的乘积。</p>
</blockquote>
<div class="danger">

<ul>
<li>关于表的别名：<blockquote>
<p> select e.ename,d.dname from emp e,dept d;<br>  表的别名有什么好处？</p>
<pre><code>  第一：执行效率高。
  第二：可读性好。
</code></pre>
</blockquote>
</li>
</ul>
</div>

<h5 id="怎么避免笛卡尔积现象？当然是加条件进行过滤。"><a href="#怎么避免笛卡尔积现象？当然是加条件进行过滤。" class="headerlink" title="怎么避免笛卡尔积现象？当然是加条件进行过滤。"></a><font color="#f2711c">怎么避免笛卡尔积现象？当然是加条件进行过滤。</font></h5><p>思考：避免了笛卡尔积现象，会减少记录的匹配次数吗？</p>
<ul>
<li>不会，次数还是56次。只不过显示的是有效记录。</li>
</ul>
<p>案例：找出每一个员工的部门名称，要求显示员工名和部门名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">select	</span><br><span class="line">	e.ename,d.dname</span><br><span class="line">from</span><br><span class="line">	emp e , dept d</span><br><span class="line">where</span><br><span class="line">	e.deptno = d.deptno; //SQL92，以后不用。</span><br><span class="line"></span><br><span class="line">+--------+------------+</span><br><span class="line">| ename  | dname      |</span><br><span class="line">+--------+------------+</span><br><span class="line">| CLARK  | ACCOUNTING |</span><br><span class="line">| KING   | ACCOUNTING |</span><br><span class="line">| MILLER | ACCOUNTING |</span><br><span class="line">| SMITH  | RESEARCH   |</span><br><span class="line">| JONES  | RESEARCH   |</span><br><span class="line">| SCOTT  | RESEARCH   |</span><br><span class="line">| ADAMS  | RESEARCH   |</span><br><span class="line">| FORD   | RESEARCH   |</span><br><span class="line">| ALLEN  | SALES      |</span><br><span class="line">| WARD   | SALES      |</span><br><span class="line">| MARTIN | SALES      |</span><br><span class="line">| BLAKE  | SALES      |</span><br><span class="line">| TURNER | SALES      |</span><br><span class="line">| JAMES  | SALES      |</span><br></pre></td></tr></table></figure>

<h5 id="内连接之等值连接"><a href="#内连接之等值连接" class="headerlink" title="内连接之等值连接"></a><font color="#f2711c">内连接之等值连接</font></h5><blockquote>
<p>最大特点是：条件是等量关系。<br>案例：查询每个员工的部门名称，要求显示员工名和部门名。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SQL92:（太老，不用了）</span><br><span class="line">	select </span><br><span class="line">		e.ename,d.dname</span><br><span class="line">	from</span><br><span class="line">		emp e, dept d</span><br><span class="line">	where</span><br><span class="line">		e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">SQL99：（常用的）</span><br><span class="line">	select </span><br><span class="line">		e.ename,d.dname</span><br><span class="line">	from</span><br><span class="line">		emp e</span><br><span class="line">	join</span><br><span class="line">		dept d</span><br><span class="line">	on</span><br><span class="line">		e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">	// inner可以省略的，带着inner目的是可读性好一些。</span><br><span class="line">	select </span><br><span class="line">		e.ename,d.dname</span><br><span class="line">	from</span><br><span class="line">		emp e</span><br><span class="line">	inner join</span><br><span class="line">		dept d</span><br><span class="line">	on</span><br><span class="line">		e.deptno = d.deptno;</span><br><span class="line">	</span><br><span class="line">	语法：</span><br><span class="line">		...</span><br><span class="line">			A</span><br><span class="line">		join</span><br><span class="line">			B</span><br><span class="line">		on</span><br><span class="line">			连接条件</span><br><span class="line">		where</span><br><span class="line">			...</span><br><span class="line">	</span><br><span class="line">	SQL99语法结构更清晰一些：表的连接条件和后来的where条件分离了。</span><br><span class="line"></span><br><span class="line">	+--------+------------+</span><br><span class="line">	| ename  | dname      |</span><br><span class="line">	+--------+------------+</span><br><span class="line">	| CLARK  | ACCOUNTING |</span><br><span class="line">	| KING   | ACCOUNTING |</span><br><span class="line">	| MILLER | ACCOUNTING |</span><br><span class="line">	| SMITH  | RESEARCH   |</span><br><span class="line">	| JONES  | RESEARCH   |</span><br><span class="line">	| SCOTT  | RESEARCH   |</span><br><span class="line">	| ADAMS  | RESEARCH   |</span><br><span class="line">	| FORD   | RESEARCH   |</span><br><span class="line">	| ALLEN  | SALES      |</span><br><span class="line">	| WARD   | SALES      |</span><br><span class="line">	| MARTIN | SALES      |</span><br><span class="line">	| BLAKE  | SALES      |</span><br><span class="line">	| TURNER | SALES      |</span><br><span class="line">	| JAMES  | SALES      |</span><br><span class="line">	+--------+------------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="内连接之非等值连接"><a href="#内连接之非等值连接" class="headerlink" title="内连接之非等值连接"></a><font color="#f2711c">内连接之非等值连接</font></h5><blockquote>
<p>最大的特点是：连接条件中的关系是非等量关系。<br>案例：找出每个员工的工资等级，要求显示员工名、工资、工资等级。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select ename,sal from emp; e</span><br><span class="line">+--------+---------+</span><br><span class="line">| ename  | sal     |</span><br><span class="line">+--------+---------+</span><br><span class="line">| SMITH  |  800.00 |</span><br><span class="line">| ALLEN  | 1600.00 |</span><br><span class="line">| WARD   | 1250.00 |</span><br><span class="line">| JONES  | 2975.00 |</span><br><span class="line">| MARTIN | 1250.00 |</span><br><span class="line">| BLAKE  | 2850.00 |</span><br><span class="line">| CLARK  | 2450.00 |</span><br><span class="line">| SCOTT  | 3000.00 |</span><br><span class="line">| KING   | 5000.00 |</span><br><span class="line">| TURNER | 1500.00 |</span><br><span class="line">| ADAMS  | 1100.00 |</span><br><span class="line">| JAMES  |  950.00 |</span><br><span class="line">| FORD   | 3000.00 |</span><br><span class="line">| MILLER | 1300.00 |</span><br><span class="line">+--------+---------+</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from salgrade; s</span><br><span class="line">+-------+-------+-------+ </span><br><span class="line">| GRADE | LOSAL | HISAL |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">|     1 |   700 |  1200 |</span><br><span class="line">|     2 |  1201 |  1400 |</span><br><span class="line">|     3 |  1401 |  2000 |</span><br><span class="line">|     4 |  2001 |  3000 |</span><br><span class="line">|     5 |  3001 |  9999 |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">	e.ename,e.sal,s.grade</span><br><span class="line">from</span><br><span class="line">	emp e</span><br><span class="line">join</span><br><span class="line">	salgrade s</span><br><span class="line">on</span><br><span class="line">	e.sal between s.losal and s.hisal;</span><br><span class="line"></span><br><span class="line">// inner可以省略</span><br><span class="line">select </span><br><span class="line">	e.ename,e.sal,s.grade</span><br><span class="line">from</span><br><span class="line">	emp e</span><br><span class="line">inner join</span><br><span class="line">	salgrade s</span><br><span class="line">on</span><br><span class="line">	e.sal between s.losal and s.hisal;</span><br><span class="line"></span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| ename  | sal     | grade |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line">| SMITH  |  800.00 |     1 |</span><br><span class="line">| ALLEN  | 1600.00 |     3 |</span><br><span class="line">| WARD   | 1250.00 |     2 |</span><br><span class="line">| JONES  | 2975.00 |     4 |</span><br><span class="line">| MARTIN | 1250.00 |     2 |</span><br><span class="line">| BLAKE  | 2850.00 |     4 |</span><br><span class="line">| CLARK  | 2450.00 |     4 |</span><br><span class="line">| SCOTT  | 3000.00 |     4 |</span><br><span class="line">| KING   | 5000.00 |     5 |</span><br><span class="line">| TURNER | 1500.00 |     3 |</span><br><span class="line">| ADAMS  | 1100.00 |     1 |</span><br><span class="line">| JAMES  |  950.00 |     1 |</span><br><span class="line">| FORD   | 3000.00 |     4 |</span><br><span class="line">| MILLER | 1300.00 |     2 |</span><br><span class="line">+--------+---------+-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a><font color="#f2711c">自连接</font></h5><blockquote>
<p>最大的特点是：一张表看做两张表。自己连接自己。<br>案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select empno,ename,mgr from emp;</span><br><span class="line">emp a 员工表</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| empno | ename  | mgr  |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">|  7369 | SMITH  | 7902 |</span><br><span class="line">|  7499 | ALLEN  | 7698 |</span><br><span class="line">|  7521 | WARD   | 7698 |</span><br><span class="line">|  7566 | JONES  | 7839 |</span><br><span class="line">|  7654 | MARTIN | 7698 |</span><br><span class="line">|  7698 | BLAKE  | 7839 |</span><br><span class="line">|  7782 | CLARK  | 7839 |</span><br><span class="line">|  7788 | SCOTT  | 7566 |</span><br><span class="line">|  7839 | KING   | NULL |</span><br><span class="line">|  7844 | TURNER | 7698 |</span><br><span class="line">|  7876 | ADAMS  | 7788 |</span><br><span class="line">|  7900 | JAMES  | 7698 |</span><br><span class="line">|  7902 | FORD   | 7566 |</span><br><span class="line">|  7934 | MILLER | 7782 |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">emp b 领导表</span><br><span class="line">+-------+--------+</span><br><span class="line">| empno | ename  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">|  7698 | BLAKE  |</span><br><span class="line">|  7782 | CLARK  |</span><br><span class="line">|  7788 | SCOTT  |</span><br><span class="line">|  7839 | KING   |</span><br><span class="line">|  7902 | FORD   |</span><br><span class="line">+-------+--------+</span><br><span class="line"></span><br><span class="line">员工的领导编号 = 领导的员工编号</span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">	a.ename as &#x27;员工名&#x27;,b.ename as &#x27;领导名&#x27;</span><br><span class="line">from</span><br><span class="line">	emp a</span><br><span class="line">inner join</span><br><span class="line">	emp b</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br></pre></td></tr></table></figure>

<p>案例：找出每个员工的上级领导，要求显示员工名和对应的领导名。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+--------+--------+</span><br><span class="line">| 员工名 | 领导名 |</span><br><span class="line">+--------+--------+</span><br><span class="line">| SMITH  | FORD   |</span><br><span class="line">| ALLEN  | BLAKE  |</span><br><span class="line">| WARD   | BLAKE  |</span><br><span class="line">| JONES  | KING   |</span><br><span class="line">| MARTIN | BLAKE  |</span><br><span class="line">| BLAKE  | KING   |</span><br><span class="line">| CLARK  | KING   |</span><br><span class="line">| SCOTT  | JONES  |</span><br><span class="line">| TURNER | BLAKE  |</span><br><span class="line">| ADAMS  | SCOTT  |</span><br><span class="line">| JAMES  | BLAKE  |</span><br><span class="line">| FORD   | JONES  |</span><br><span class="line">| MILLER | CLARK  |</span><br><span class="line">+--------+--------+</span><br></pre></td></tr></table></figure>
<h5 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a><font color="#f2711c">外连接</font></h5><p>什么是外连接，和内连接有什么区别？</p>
<div class="danger">

<pre><code>  内连接:
  假设A和B表进行连接，使用内连接的话，凡是A表和B表能够匹配上的记录查询出来，这就是内连接。
  AB两张表没有主副之分，两张表是平等的。  
外连接: 
    假设A和B表进行连接，使用外连接的话，AB两张表中有一张表是主表，一张表是副表，主要查询主表中
    的数据，捎带着查询副表，当副表中的数据没有和主表中的数据匹配上，副表自动模拟出NULL与之匹配。
外连接的分类？
    左外连接（左连接）：表示左边的这张表是主表。
    右外连接（右连接）：表示右边的这张表是主表。
左连接有右连接的写法，右连接也会有对应的左连接的写法。
</code></pre>
</div>
案例：找出每个员工的上级领导？（所有员工必须全部查询出来。）
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">emp a 员工表</span><br><span class="line">+-------+--------+------+</span><br><span class="line">| empno | ename  | mgr  |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">|  7369 | SMITH  | 7902 |</span><br><span class="line">|  7499 | ALLEN  | 7698 |</span><br><span class="line">|  7521 | WARD   | 7698 |</span><br><span class="line">|  7566 | JONES  | 7839 |</span><br><span class="line">|  7654 | MARTIN | 7698 |</span><br><span class="line">|  7698 | BLAKE  | 7839 |</span><br><span class="line">|  7782 | CLARK  | 7839 |</span><br><span class="line">|  7788 | SCOTT  | 7566 |</span><br><span class="line">|  7839 | KING   | NULL |</span><br><span class="line">|  7844 | TURNER | 7698 |</span><br><span class="line">|  7876 | ADAMS  | 7788 |</span><br><span class="line">|  7900 | JAMES  | 7698 |</span><br><span class="line">|  7902 | FORD   | 7566 |</span><br><span class="line">|  7934 | MILLER | 7782 |</span><br><span class="line">+-------+--------+------+</span><br><span class="line">emp b 领导表</span><br><span class="line">+-------+--------+</span><br><span class="line">| empno | ename  |</span><br><span class="line">+-------+--------+</span><br><span class="line">|  7566 | JONES  |</span><br><span class="line">|  7698 | BLAKE  |</span><br><span class="line">|  7782 | CLARK  |</span><br><span class="line">|  7788 | SCOTT  |</span><br><span class="line">|  7839 | KING   |</span><br><span class="line">|  7902 | FORD   |</span><br><span class="line">+-------+--------+</span><br><span class="line"></span><br><span class="line">内连接：</span><br><span class="line">select </span><br><span class="line">	a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp a</span><br><span class="line">join</span><br><span class="line">	emp b</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">外连接：（左外连接/左连接）</span><br><span class="line">select </span><br><span class="line">	a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp a</span><br><span class="line">left join</span><br><span class="line">	emp b</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">// outer是可以省略的。</span><br><span class="line">select </span><br><span class="line">	a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp a</span><br><span class="line">left outer join</span><br><span class="line">	emp b</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">外连接：（右外连接/右连接）</span><br><span class="line">select </span><br><span class="line">	a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp b</span><br><span class="line">right join</span><br><span class="line">	emp a</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">// outer可以省略。</span><br><span class="line">select </span><br><span class="line">	a.ename &#x27;员工&#x27;, b.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp b</span><br><span class="line">right outer join</span><br><span class="line">	emp a</span><br><span class="line">on</span><br><span class="line">	a.mgr = b.empno;</span><br><span class="line"></span><br><span class="line">+--------+-------+</span><br><span class="line">| 员工      | 领导    |</span><br><span class="line">+--------+-------+</span><br><span class="line">| SMITH  | FORD  |</span><br><span class="line">| ALLEN  | BLAKE |</span><br><span class="line">| WARD   | BLAKE |</span><br><span class="line">| JONES  | KING  |</span><br><span class="line">| MARTIN | BLAKE |</span><br><span class="line">| BLAKE  | KING  |</span><br><span class="line">| CLARK  | KING  |</span><br><span class="line">| SCOTT  | JONES |</span><br><span class="line">| KING   | NULL  |</span><br><span class="line">| TURNER | BLAKE |</span><br><span class="line">| ADAMS  | SCOTT |</span><br><span class="line">| JAMES  | BLAKE |</span><br><span class="line">| FORD   | JONES |</span><br><span class="line">| MILLER | CLARK |</span><br><span class="line">+--------+-------+</span><br></pre></td></tr></table></figure>

<blockquote>
<p>外连接最重要的特点是：主表的数据无条件的全部查询出来。</p>
</blockquote>
<p>案例：找出哪个部门没有员工？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">EMP表</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT  | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES  | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD   | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">+-------+--------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">DEPT</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line"></span><br><span class="line">select </span><br><span class="line">	d.*</span><br><span class="line">from</span><br><span class="line">	emp e</span><br><span class="line">right join</span><br><span class="line">	dept d</span><br><span class="line">on</span><br><span class="line">	e.deptno = d.deptno</span><br><span class="line">where</span><br><span class="line">	e.empno is null;</span><br><span class="line"></span><br><span class="line">+--------+------------+--------+</span><br><span class="line">| DEPTNO | DNAME      | LOC    |</span><br><span class="line">+--------+------------+--------+</span><br><span class="line">|     40 | OPERATIONS | BOSTON |</span><br><span class="line">+--------+------------+--------+</span><br></pre></td></tr></table></figure>

<h5 id="三张表怎么连接查询"><a href="#三张表怎么连接查询" class="headerlink" title="三张表怎么连接查询"></a><font color="#f2711c">三张表怎么连接查询</font></h5><p>案例：找出每一个员工的部门名称以及工资等级。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">EMP e</span><br><span class="line">+-------+--------+---------+--------+</span><br><span class="line">| empno | ename  | sal     | deptno |</span><br><span class="line">+-------+--------+---------+--------+</span><br><span class="line">|  7369 | SMITH  |  800.00 |     20 |</span><br><span class="line">|  7499 | ALLEN  | 1600.00 |     30 |</span><br><span class="line">|  7521 | WARD   | 1250.00 |     30 |</span><br><span class="line">|  7566 | JONES  | 2975.00 |     20 |</span><br><span class="line">|  7654 | MARTIN | 1250.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | 2850.00 |     30 |</span><br><span class="line">|  7782 | CLARK  | 2450.00 |     10 |</span><br><span class="line">|  7788 | SCOTT  | 3000.00 |     20 |</span><br><span class="line">|  7839 | KING   | 5000.00 |     10 |</span><br><span class="line">|  7844 | TURNER | 1500.00 |     30 |</span><br><span class="line">|  7876 | ADAMS  | 1100.00 |     20 |</span><br><span class="line">|  7900 | JAMES  |  950.00 |     30 |</span><br><span class="line">|  7902 | FORD   | 3000.00 |     20 |</span><br><span class="line">|  7934 | MILLER | 1300.00 |     10 |</span><br><span class="line">+-------+--------+---------+--------+</span><br><span class="line">DEPT d</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">| DEPTNO | DNAME      | LOC      |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">|     10 | ACCOUNTING | NEW YORK |</span><br><span class="line">|     20 | RESEARCH   | DALLAS   |</span><br><span class="line">|     30 | SALES      | CHICAGO  |</span><br><span class="line">|     40 | OPERATIONS | BOSTON   |</span><br><span class="line">+--------+------------+----------+</span><br><span class="line">SALGRADE s</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">| GRADE | LOSAL | HISAL |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line">|     1 |   700 |  1200 |</span><br><span class="line">|     2 |  1201 |  1400 |</span><br><span class="line">|     3 |  1401 |  2000 |</span><br><span class="line">|     4 |  2001 |  3000 |</span><br><span class="line">|     5 |  3001 |  9999 |</span><br><span class="line">+-------+-------+-------+</span><br><span class="line"></span><br><span class="line">注意，解释一下：</span><br><span class="line">	....</span><br><span class="line">		A</span><br><span class="line">	join</span><br><span class="line">		B</span><br><span class="line">	join</span><br><span class="line">		C</span><br><span class="line">	on</span><br><span class="line">		...</span><br><span class="line">	</span><br><span class="line">	表示：A表和B表先进行表连接，连接之后A表继续和C表进行连接。</span><br><span class="line"></span><br><span class="line">	select </span><br><span class="line">		e.ename,d.dname,s.grade</span><br><span class="line">	from</span><br><span class="line">		emp e</span><br><span class="line">	join</span><br><span class="line">		dept d</span><br><span class="line">	on</span><br><span class="line">		e.deptno = d.deptno</span><br><span class="line">	join</span><br><span class="line">		salgrade s</span><br><span class="line">	on</span><br><span class="line">		e.sal between s.losal and s.hisal;</span><br><span class="line">	</span><br><span class="line">	+--------+------------+-------+</span><br><span class="line">	| ename  | dname      | grade |</span><br><span class="line">	+--------+------------+-------+</span><br><span class="line">	| SMITH  | RESEARCH   |     1 |</span><br><span class="line">	| ALLEN  | SALES      |     3 |</span><br><span class="line">	| WARD   | SALES      |     2 |</span><br><span class="line">	| JONES  | RESEARCH   |     4 |</span><br><span class="line">	| MARTIN | SALES      |     2 |</span><br><span class="line">	| BLAKE  | SALES      |     4 |</span><br><span class="line">	| CLARK  | ACCOUNTING |     4 |</span><br><span class="line">	| SCOTT  | RESEARCH   |     4 |</span><br><span class="line">	| KING   | ACCOUNTING |     5 |</span><br><span class="line">	| TURNER | SALES      |     3 |</span><br><span class="line">	| ADAMS  | RESEARCH   |     1 |</span><br><span class="line">	| JAMES  | SALES      |     1 |</span><br><span class="line">	| FORD   | RESEARCH   |     4 |</span><br><span class="line">	| MILLER | ACCOUNTING |     2 |</span><br><span class="line">	+--------+------------+-------+</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>案例：找出每一个员工的部门名称、工资等级、以及上级领导。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">select </span><br><span class="line">	e.ename &#x27;员工&#x27;,d.dname,s.grade,e1.ename &#x27;领导&#x27;</span><br><span class="line">from</span><br><span class="line">	emp e</span><br><span class="line">join</span><br><span class="line">	dept d</span><br><span class="line">on</span><br><span class="line">	e.deptno = d.deptno</span><br><span class="line">join</span><br><span class="line">	salgrade s</span><br><span class="line">on</span><br><span class="line">	e.sal between s.losal and s.hisal</span><br><span class="line">left join</span><br><span class="line">	emp e1</span><br><span class="line">on</span><br><span class="line">	e.mgr = e1.empno;</span><br><span class="line"></span><br><span class="line">+--------+------------+-------+-------+</span><br><span class="line">| 员工      | dname      | grade | 领导    |</span><br><span class="line">+--------+------------+-------+-------+</span><br><span class="line">| SMITH  | RESEARCH   |     1 | FORD  |</span><br><span class="line">| ALLEN  | SALES      |     3 | BLAKE |</span><br><span class="line">| WARD   | SALES      |     2 | BLAKE |</span><br><span class="line">| JONES  | RESEARCH   |     4 | KING  |</span><br><span class="line">| MARTIN | SALES      |     2 | BLAKE |</span><br><span class="line">| BLAKE  | SALES      |     4 | KING  |</span><br><span class="line">| CLARK  | ACCOUNTING |     4 | KING  |</span><br><span class="line">| SCOTT  | RESEARCH   |     4 | JONES |</span><br><span class="line">| KING   | ACCOUNTING |     5 | NULL  |</span><br><span class="line">| TURNER | SALES      |     3 | BLAKE |</span><br><span class="line">| ADAMS  | RESEARCH   |     1 | SCOTT |</span><br><span class="line">| JAMES  | SALES      |     1 | BLAKE |</span><br><span class="line">| FORD   | RESEARCH   |     4 | JONES |</span><br><span class="line">| MILLER | ACCOUNTING |     2 | CLARK |</span><br><span class="line">+--------+------------+-------+-------+</span><br></pre></td></tr></table></figure>

<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>子查询就是嵌套的select语句，可以理解为子查询是一张表</p>
<h5 id="在where语句中使用子查询，也就是在where语句中加入select语句"><a href="#在where语句中使用子查询，也就是在where语句中加入select语句" class="headerlink" title="在where语句中使用子查询，也就是在where语句中加入select语句"></a><font color="#f2711c">在where语句中使用子查询，也就是在where语句中加入select语句</font></h5><ul>
<li>查询员工信息，查询哪些人是管理者，要求显示出其员工编号和员工姓名</li>
</ul>
<ol>
<li>首先取得管理者的编号<blockquote>
<p>select distinct MGR from EMP where MGR is not null;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select distinct MGR from EMP where MGR is not null;</span><br><span class="line">+------+</span><br><span class="line">| MGR  |</span><br><span class="line">+------+</span><br><span class="line">| 7902 |</span><br><span class="line">| 7698 |</span><br><span class="line">| 7839 |</span><br><span class="line">| 7566 |</span><br><span class="line">| 7788 |</span><br><span class="line">| 7782 |</span><br><span class="line">+------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li>查询员工编号<blockquote>
<p>select EMPNO,ENAME from EMP where EMPNO in (select distinct MGR from EMP where MGR is not null);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select EMPNO,ENAME from EMP where EMPNO in (select distinct MGR from EMP where MGR is not null);</span><br><span class="line">+-------+-------+</span><br><span class="line">| EMPNO | ENAME |</span><br><span class="line">+-------+-------+</span><br><span class="line">|  7902 | FORD  |</span><br><span class="line">|  7698 | BLAKE |</span><br><span class="line">|  7839 | KING  |</span><br><span class="line">|  7566 | JONES |</span><br><span class="line">|  7788 | SCOTT |</span><br><span class="line">|  7782 | CLARK |</span><br><span class="line">+-------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>查询哪些人的薪水高于员工的平均薪水，需要显示员工编号，员工姓名，薪水<br>实现思路：</li>
</ul>
<ol>
<li>取得平均薪水<blockquote>
<p>select avg(sal) from EMP;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select avg(sal) from EMP;</span><br><span class="line">+-------------+</span><br><span class="line">| avg(sal)    |</span><br><span class="line">+-------------+</span><br><span class="line">| 2073.214286 |</span><br><span class="line">+-------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li>取得大于平均薪水的员工<blockquote>
<p>select empno, ename, sal from EMP where sal &gt; (select avg(sal) from EMP);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;  select empno, ename, sal from EMP where sal &gt; (select avg(sal) from EMP);</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">| empno | ename | sal     |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">|  7566 | JONES | 2975.00 |</span><br><span class="line">|  7698 | BLAKE | 2850.00 |</span><br><span class="line">|  7782 | CLARK | 2450.00 |</span><br><span class="line">|  7788 | SCOTT | 3000.00 |</span><br><span class="line">|  7839 | KING  | 5000.00 |</span><br><span class="line">|  7902 | FORD  | 3000.00 |</span><br><span class="line">+-------+-------+---------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="在from语句中使用子查询，可以将该子查询看做一张表"><a href="#在from语句中使用子查询，可以将该子查询看做一张表" class="headerlink" title="在from语句中使用子查询，可以将该子查询看做一张表"></a><font color="#f2711c">在from语句中使用子查询，可以将该子查询看做一张表</font></h5><ul>
<li>查询员工信息，查询哪些人是管理者，要求显示出其员工编号和员工姓名</li>
</ul>
<ol>
<li>首先取得管理者的编号，去除重复的<blockquote>
<p>select distinct mgr from EMP where mgr is not null;</p>
</blockquote>
</li>
<li>将以上查询作为一张表，放到from语句的后面<blockquote>
<p>select e.empno,e.ename from EMP e join (select distinct mgr from EMP where mgr is not null) m on e.empno = m.mgr;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select e.empno,e.ename from EMP e join (select distinct mgr from EMP where mgr is not null) m on e.empno = m.mgr;</span><br><span class="line">+-------+-------+</span><br><span class="line">| empno | ename |</span><br><span class="line">+-------+-------+</span><br><span class="line">|  7902 | FORD  |</span><br><span class="line">|  7698 | BLAKE |</span><br><span class="line">|  7839 | KING  |</span><br><span class="line">|  7566 | JONES |</span><br><span class="line">|  7788 | SCOTT |</span><br><span class="line">|  7782 | CLARK |</span><br><span class="line">+-------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<ul>
<li>查询各部门的平均薪水所属等级，需要显示部门编号，平均薪水，等级编号</li>
</ul>
<ol>
<li>首先取得各个部门平均薪水<blockquote>
<p>select deptno,avg(sal) from EMP group by deptno</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select deptno,avg(sal) from EMP group by deptno;</span><br><span class="line">+--------+-------------+</span><br><span class="line">| deptno | avg(sal)    |</span><br><span class="line">+--------+-------------+</span><br><span class="line">|     10 | 2916.666667 |</span><br><span class="line">|     20 | 2175.000000 |</span><br><span class="line">|     30 | 1566.666667 |</span><br><span class="line">+--------+-------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li>将部门的平均薪水作为一张表与薪水等级表建立连接，取得等级<blockquote>
<p>select m.deptno,avg_sal,n.grade from (select deptno,avg(sal) avg_sal from EMP group by deptno) m join SALGRADE n on (m.avg_sal between n.LOSAL and n.HISAL);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select m.deptno,avg_sal,n.grade from (select deptno,avg(sal) avg_sal from EMP group by deptno) m join SALGRADE n on (m.avg_sal between n.LOSAL and n.HISAL);</span><br><span class="line">+--------+-------------+-------+</span><br><span class="line">| deptno | avg_sal     | grade |</span><br><span class="line">+--------+-------------+-------+</span><br><span class="line">|     10 | 2916.666667 |     4 |</span><br><span class="line">|     20 | 2175.000000 |     4 |</span><br><span class="line">|     30 | 1566.666667 |     3 |</span><br><span class="line">+--------+-------------+-------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="在select语句中使用子查询"><a href="#在select语句中使用子查询" class="headerlink" title="在select语句中使用子查询"></a><font color="#f2711c">在select语句中使用子查询</font></h5><ul>
<li>查询员工信息，并显示出员工所属的部门名称<br>第一种做法，将员工表和部门表连接<blockquote>
<p>select e.ename, d.dname from EMP e, dept d where e.deptno=d.deptno;<br>第二种做法，在select语句中再次嵌套select语句完成部分名称的查询<br>select e.ename, (select d.dname from dept d where e.deptno=d.deptno) as dname from EMP e;</p>
</blockquote>
</li>
</ul>
<h4 id="union合并集合（相加）"><a href="#union合并集合（相加）" class="headerlink" title="union合并集合（相加）"></a><font color="#f2711c">union合并集合（相加）</font></h4><ol>
<li>查询job包含MANAGER和包含SALESMAN的员工<blockquote>
<p>select * from EMP where job in(‘MANAGER’, ‘SALESMAN’);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where job in(&#x27;MANAGER&#x27;, &#x27;SALESMAN&#x27;);</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER  | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER  | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li>采用union来合并<blockquote>
<p>select * from EMP where job=’MANAGER’<br>union<br>select * from EMP where job=’SALESMAN’</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP where job=&#x27;MANAGER&#x27;</span><br><span class="line">    -&gt; union</span><br><span class="line">    -&gt; select * from EMP where job=&#x27;SALESMAN&#x27;;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7698 | BLAKE  | MANAGER  | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK  | MANAGER  | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7844 | TURNER | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="limit的使用"><a href="#limit的使用" class="headerlink" title="limit的使用"></a>limit的使用</h4><p>mysql提供了limit，主要用于提取前几条或者中间某几行数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select * from table limit m,n</span><br><span class="line">其中m是记录开始的index，从0开始，表示第一条记录</span><br><span class="line">n是指从第m+1条开始，取n条</span><br><span class="line">select * from tablename limit 2,4</span><br><span class="line">即取出第3条至第6条，4条记录</span><br></pre></td></tr></table></figure>

<h5 id="取得前5条数据"><a href="#取得前5条数据" class="headerlink" title="取得前5条数据"></a><font color="#f2711c">取得前5条数据</font></h5><blockquote>
<p>select * from EMP limit 0,5</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP limit 5;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK    | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from EMP limit 0,5;</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME  | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH  | CLERK    | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN  | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD   | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES  | MANAGER  | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">+-------+--------+----------+------+------------+---------+---------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h5 id="从第二条开始取两条数据"><a href="#从第二条开始取两条数据" class="headerlink" title="从第二条开始取两条数据"></a><font color="#f2711c">从第二条开始取两条数据</font></h5><blockquote>
<p>select * from EMP limit 1,2;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP limit 1,2;</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB      | MGR  | HIREDATE   | SAL     | COMM   | DEPTNO |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">|  7499 | ALLEN | SALESMAN | 7698 | 1981-02-20 | 1600.00 | 300.00 |     30 |</span><br><span class="line">|  7521 | WARD  | SALESMAN | 7698 | 1981-02-22 | 1250.00 | 500.00 |     30 |</span><br><span class="line">+-------+-------+----------+------+------------+---------+--------+--------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h5 id="取得薪水最高的前5名"><a href="#取得薪水最高的前5名" class="headerlink" title="取得薪水最高的前5名"></a><font color="#f2711c">取得薪水最高的前5名</font></h5><blockquote>
<p>select * from EMP order by sal desc limit 5;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP order by sal desc limit 5;</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">| EMPNO | ENAME | JOB       | MGR  | HIREDATE   | SAL     | COMM | DEPTNO |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">|  7839 | KING  | PRESIDENT | NULL | 1981-11-17 | 5000.00 | NULL |     10 |</span><br><span class="line">|  7902 | FORD  | ANALYST   | 7566 | 1981-12-03 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7788 | SCOTT | ANALYST   | 7566 | 1987-04-19 | 3000.00 | NULL |     20 |</span><br><span class="line">|  7566 | JONES | MANAGER   | 7839 | 1981-04-02 | 2975.00 | NULL |     20 |</span><br><span class="line">|  7698 | BLAKE | MANAGER   | 7839 | 1981-05-01 | 2850.00 | NULL |     30 |</span><br><span class="line">+-------+-------+-----------+------+------------+---------+------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h4 id="表"><a href="#表" class="headerlink" title="表"></a>表</h4><h5 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a><font color="#f2711c">创建表</font></h5><h6 id="语法格式"><a href="#语法格式" class="headerlink" title="语法格式"></a><font color="#f2711c">语法格式</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">create table tableName(</span><br><span class="line">  columnName dataType(length),</span><br><span class="line">  ......</span><br><span class="line">  columnName dataType(length)</span><br><span class="line">);</span><br><span class="line">set character_set_results=&#x27;gbk&#x27;;</span><br><span class="line"></span><br><span class="line">show variables like &#x27;%char%&#x27;</span><br><span class="line"></span><br><span class="line">创建表的时候，表中有字段，每一个字段有：</span><br><span class="line">     * 字段名</span><br><span class="line">     * 字段数据类型</span><br><span class="line">     * 字段长度限制</span><br><span class="line">     * 字段约束</span><br></pre></td></tr></table></figure>
<h6 id="MySql常用数据类型"><a href="#MySql常用数据类型" class="headerlink" title="MySql常用数据类型"></a><font color="#f2711c">MySql常用数据类型</font></h6><table>
<thead>
<tr>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Char(长度)</td>
<td>定长字符串，存储空间大小固定，适合作为主键或外键</td>
</tr>
<tr>
<td>Varchar(长度)</td>
<td>变长字符串，存储空间等于实际数据空间</td>
</tr>
<tr>
<td>double(有效数字位数，小数位)</td>
<td>数值型</td>
</tr>
<tr>
<td>Float(有效数字位，小数位)</td>
<td>数值型</td>
</tr>
<tr>
<td>Int(长度)</td>
<td>整型</td>
</tr>
<tr>
<td>bigint(长度)</td>
<td>长整型</td>
</tr>
<tr>
<td>Date</td>
<td>日期型 年月日</td>
</tr>
<tr>
<td>DateTime</td>
<td>日期型 年月日 时分秒 毫秒</td>
</tr>
<tr>
<td>time</td>
<td>日期型 时分秒</td>
</tr>
<tr>
<td>BLOB</td>
<td>Binary Large OBject（二进制大对象）</td>
</tr>
<tr>
<td>CLOB</td>
<td>Character Large OBject（字符大对象）</td>
</tr>
</tbody></table>
<h6 id="建立学生信息表"><a href="#建立学生信息表" class="headerlink" title="建立学生信息表"></a><font color="#f2711c">建立学生信息表</font></h6><ul>
<li>建立学生信息表，字段包括：学号、姓名、性别、出生日期、email、班级标识别<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_student</span><br><span class="line">    -&gt; (</span><br><span class="line">    -&gt; student_id int(10),</span><br><span class="line">    -&gt; student_name varchar(20),</span><br><span class="line">    -&gt; sex char(2),</span><br><span class="line">    -&gt; birthday date,</span><br><span class="line">    -&gt; email varchar(30),</span><br><span class="line">    -&gt; class_id int(3)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)     | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)     | YES  |     | NULL    |       |</span><br><span class="line">| birthday     | date        | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30) | YES  |     | NULL    |       |</span><br><span class="line">| class_id     | int(3)      | YES  |     | NULL    |       |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h6 id="向t-student表中加入数据"><a href="#向t-student表中加入数据" class="headerlink" title="向t_student表中加入数据"></a><font color="#f2711c">向t_student表中加入数据</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,class_id) values (1001,&#x27;zhangsan&#x27;,&#x27;m&#x27;,&#x27;1988-01-01&#x27;,&#x27;qqq@163.com&#x27;,10);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+-------------+----------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email       | class_id |</span><br><span class="line">+------------+--------------+------+------------+-------------+----------+</span><br><span class="line">|       1001 | zhangsan     | m    | 1988-01-01 | qqq@163.com |       10 |</span><br><span class="line">+------------+--------------+------+------------+-------------+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="向t-student表中加入数据（使用默认值）"><a href="#向t-student表中加入数据（使用默认值）" class="headerlink" title="向t_student表中加入数据（使用默认值）"></a><font color="#f2711c">向t_student表中加入数据（使用默认值）</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop table if exists t_student</span><br><span class="line">    -&gt; create table t_student( student_id int(10), student_name varchar(20), sex char(2) default &#x27;m&#x27;, birthday date, email varchar(30), classes_id int(3) )</span><br><span class="line">    -&gt; insert into t_student(student_id, student_name, birthday, email, classes_id) values (1002,&#x27;zhangsan&#x27;,&#x27;1988-01-01&#x27;,&#x27;qqq@163&#x27;,10);</span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+---------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email   | classes_id |</span><br><span class="line">+------------+--------------+------+------------+---------+------------+</span><br><span class="line">|       1002 | zhangsan     | m    | 1988-01-01 | qqq@163 |         10 |</span><br><span class="line">+------------+--------------+------+------------+---------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<h5 id="增加-删除-修改表结构"><a href="#增加-删除-修改表结构" class="headerlink" title="增加/删除/修改表结构"></a><font color="#f2711c">增加/删除/修改表结构</font></h5><p>采用alter table 来增加/删除/修改表结构，不影响表中的数据</p>
<h6 id="添加字段"><a href="#添加字段" class="headerlink" title="添加字段"></a><font color="#f2711c">添加字段</font></h6><ul>
<li><p>如：需求发生改变，需要向t_student中加入联系电话字段，字段名称为：contatct_tel 类型为varchar(40)</p>
<blockquote>
<p>alter table t_student add  contact_tel varchar(40);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t_student add contact_tel varchar(40);</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)     | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)     | YES  |     | m       |       |</span><br><span class="line">| birthday     | date        | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30) | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)      | YES  |     | NULL    |       |</span><br><span class="line">| contact_tel  | varchar(40) | YES  |     | NULL    |       |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
<li><p>用mysql创建完表后，如何设置主键</p>
<blockquote>
<p>alter table t_student add PRIMARY KEY (student_id);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t_student add PRIMARY KEY (student_id);</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)      | NO   | PRI | NULL    |       |</span><br><span class="line">| student_name | varchar(100) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)      | YES  |     | m       |       |</span><br><span class="line">| birthday     | date         | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(100) | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)       | YES  |     | NULL    |       |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h6 id="修改字段"><a href="#修改字段" class="headerlink" title="修改字段"></a><font color="#f2711c">修改字段</font></h6></li>
<li><p>如：student_name无法满足需求，长度需要更改为100</p>
<blockquote>
<p>alter table t_student modify student_name varchar(100);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)     | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)     | YES  |     | m       |       |</span><br><span class="line">| birthday     | date        | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30) | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)      | YES  |     | NULL    |       |</span><br><span class="line">| contact_tel  | varchar(40) | YES  |     | NULL    |       |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table t_student modify student_name varchar(100);</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)      | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(100) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)      | YES  |     | m       |       |</span><br><span class="line">| birthday     | date         | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30)  | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)       | YES  |     | NULL    |       |</span><br><span class="line">| contact_tel  | varchar(40)  | YES  |     | NULL    |       |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a><font color="#f2711c">删除字段</font></h6></li>
<li><p>如：删除联系电话字段</p>
<blockquote>
<p>alter table t_student drop contact_tel;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)      | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(100) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)      | YES  |     | m       |       |</span><br><span class="line">| birthday     | date         | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30)  | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)       | YES  |     | NULL    |       |</span><br><span class="line">| contact_tel  | varchar(40)  | YES  |     | NULL    |       |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">7 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table t_student drop contact_tel;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)      | YES  |     | NULL    |       |</span><br><span class="line">| student_name | varchar(100) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)      | YES  |     | m       |       |</span><br><span class="line">| birthday     | date         | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30)  | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)       | YES  |     | NULL    |       |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="添加、修改和删除表数据"><a href="#添加、修改和删除表数据" class="headerlink" title="添加、修改和删除表数据"></a><font color="#f2711c">添加、修改和删除表数据</font></h5><h6 id="insert"><a href="#insert" class="headerlink" title="insert"></a><font color="#f2711c">insert</font></h6><ul>
<li><p><font color="#f2711c">insert语法格式</font></p>
<blockquote>
<p>insert into 表名(字段，…) values (值…)</p>
</blockquote>
</li>
<li><p><font color="#f2711c">省略字段的插入</font><br>不建议使用此种方式，因为当数据库表中的字段位置发生改变的时候会影响到insert语句</p>
<blockquote>
<p>insert into EMP values(9999,’zhangsan’,’MANAGER’,null,null,3000,500,10);</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into EMP values(9999,&#x27;zhangsan&#x27;,&#x27;MANAGER&#x27;,null,null,3000,500,10);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from EMP;</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME    | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH    | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN    | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD     | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES    | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN   | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE    | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK    | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT    | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING     | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER   | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS    | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES    | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD     | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER   | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">|  9999 | zhangsan | MANAGER   | NULL | NULL       | 3000.00 |  500.00 |     10 |</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><font color="#f2711c">指定字段的插入</font><br>建议使用此种方式<blockquote>
<p>insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1003,’dh’,’n’,now(),‘lsabella@163’,11);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1003,&#x27;dh&#x27;,&#x27;n&#x27;,now(),&#x27;lsabella@163&#x27;,11);</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email        | classes_id |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 | qqq@163      |         10 |</span><br><span class="line">|       1003 | dh           | n    | 2021-11-03 | lsabella@163 |         11 |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<div class="danger">
出现了主键重复的错误，主键表示了记录的唯一性，不能重复
</div></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1002,&#x27;haha&#x27;,&#x27;n&#x27;,now(),&#x27;haha@163&#x27;,11);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1002&#x27; for key &#x27;PRIMARY&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li><font color="#f2711c">如何插入日期</font><div class="info">
（1）插入的日期格式和显示的日期格式一致
</div></li>
</ul>
<blockquote>
<p>insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1004,’haha1’,’n’,’1991-01-01’,‘haha@163’,11);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1004,&#x27;haha1&#x27;,&#x27;n&#x27;,&#x27;1991-01-01&#x27;,&#x27;haha@163&#x27;,11);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email        | classes_id |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 | qqq@163      |         10 |</span><br><span class="line">|       1003 | dh           | n    | 2021-11-03 | lsabella@163 |         11 |</span><br><span class="line">|       1004 | haha1        | n    | 1991-01-01 | haha@163     |         11 |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<div class="info">
（2）采用str_to_date
</div>

<blockquote>
<p>insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1005,’haha2’,’n’,str_to_date(‘1985-01-01’,’%Y-%m-%d’),‘haha@163’,11);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1005,&#x27;haha2&#x27;,&#x27;n&#x27;,str_to_date(&#x27;1985-01-01&#x27;,&#x27;%Y-%m-%d&#x27;),&#x27;haha@163&#x27;,11);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email        | classes_id |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 | qqq@163      |         10 |</span><br><span class="line">|       1003 | dh           | n    | 2021-11-03 | lsabella@163 |         11 |</span><br><span class="line">|       1004 | haha1        | n    | 1991-01-01 | haha@163     |         11 |</span><br><span class="line">|       1005 | haha2        | n    | 1985-01-01 | haha@163     |         11 |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<div class="info">
（3）添加系统日期（now()）
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id,student_name,sex,birthday,email,classes_id) values (1006,&#x27;haha3&#x27;,&#x27;n&#x27;,now(),&#x27;haha@163&#x27;,11);</span><br><span class="line">Query OK, 1 row affected, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>

<ul>
<li><font color="#f2711c">表复制</font><blockquote>
<p>create table t_student_bak as select student_id,student_name,sex,email,classes_id from t_student;</p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_student_bak as select student_id,student_name,sex,email,classes_id from t_student;</span><br><span class="line">Query OK, 5 rows affected (0.02 sec)</span><br><span class="line">Records: 5  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+-----------------------+</span><br><span class="line">| Tables_in_baishu_demo |</span><br><span class="line">+-----------------------+</span><br><span class="line">| DEPT                  |</span><br><span class="line">| EMP                   |</span><br><span class="line">| SALGRADE              |</span><br><span class="line">| t_student             |</span><br><span class="line">| t_student_bak         |</span><br><span class="line">+-----------------------+</span><br><span class="line">5 rows in set (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student_bak;</span><br><span class="line">+------------+--------------+------+--------------+------------+</span><br><span class="line">| student_id | student_name | sex  | email        | classes_id |</span><br><span class="line">+------------+--------------+------+--------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | qqq@163      |         10 |</span><br><span class="line">|       1003 | dh           | n    | lsabella@163 |         11 |</span><br><span class="line">|       1004 | haha1        | n    | haha@163     |         11 |</span><br><span class="line">|       1005 | haha2        | n    | haha@163     |         11 |</span><br><span class="line">|       1006 | haha3        | n    | haha@163     |         11 |</span><br><span class="line">+------------+--------------+------+--------------+------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>以上方式，会自动创建表，将符合查询条件的数据自动复制到创建的表中</p>
<ul>
<li><font color="#f2711c">如何将查询的数据直接放到已经存在的表中，可以使用条件</font></li>
</ul>
<blockquote>
<p>insert into t_student_bak select * from t_student where student_id = 1003;</p>
</blockquote>
<blockquote>
<p>insert into t_student_bak select student_id,student_name,sex,birthday,classes_id from t_student where student_id = 1003;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from t_student_bak;</span><br><span class="line">+------------+--------------+------+------------+----------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email    | classes_id |</span><br><span class="line">+------------+--------------+------+------------+----------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 | qqq@163  |         10 |</span><br><span class="line">|       1004 | haha1        | n    | 1991-01-01 | haha@163 |         11 |</span><br><span class="line">|       1005 | haha2        | n    | 1985-01-01 | haha@163 |         11 |</span><br><span class="line">|       1006 | haha3        | n    | 2021-11-03 | haha@163 |         11 |</span><br><span class="line">+------------+--------------+------+------------+----------+------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_student_bak select * from t_student where student_id = 1003;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Records: 1  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student_bak;</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email        | classes_id |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 | qqq@163      |         10 |</span><br><span class="line">|       1004 | haha1        | n    | 1991-01-01 | haha@163     |         11 |</span><br><span class="line">|       1005 | haha2        | n    | 1985-01-01 | haha@163     |         11 |</span><br><span class="line">|       1006 | haha3        | n    | 2021-11-03 | haha@163     |         11 |</span><br><span class="line">|       1003 | dh           | n    | 2021-11-03 | lsabella@163 |         11 |</span><br><span class="line">+------------+--------------+------+------------+--------------+------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">表结构不一致</span><br><span class="line">mysql&gt; insert into t_student_bak select student_id,student_name,sex,birthday,classes_id from t_student where student_id = 1003;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Records: 1  Duplicates: 0  Warnings: 0</span><br></pre></td></tr></table></figure>

<h6 id="update"><a href="#update" class="headerlink" title="update"></a><font color="#f2711c">update</font></h6><ul>
<li> <font color="#f2711c">语法格式</font><br>可以修改数据，可以根据条件修改数据<br>语法格式:update 表名 set 字段名称1=需要修改的值1, 字段名称2=需要修改的值2 where …<blockquote>
<p>update t_student_bak set student_name = ‘test1’ where student_id = 1003;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; update t_student_bak set student_name = &#x27;test1&#x27; where student_id = 1003;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line">mysql&gt; select * from t_student_bak;</span><br><span class="line">+------------+--------------+------+------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | classes_id |</span><br><span class="line">+------------+--------------+------+------------+------------+</span><br><span class="line">|       1002 | baishu       | m    | 1988-01-01 |         10 |</span><br><span class="line">|       1004 | haha1        | n    | 1991-01-01 |         11 |</span><br><span class="line">|       1005 | haha2        | n    | 1985-01-01 |         11 |</span><br><span class="line">|       1006 | haha3        | n    | 2021-11-03 |         11 |</span><br><span class="line">|       1003 | test1        | n    | 2021-11-03 |         11 |</span><br><span class="line">+------------+--------------+------+------------+------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="delete"><a href="#delete" class="headerlink" title="delete"></a><font color="#f2711c">delete</font></h6><p>可以删除数据，可以根据条件删除数据<br>语法格式:delete from表名 where …</p>
<ul>
<li>删除津贴为null的员工<blockquote>
<p>delete from EMP where comm is null;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from EMP;</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME    | JOB       | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7369 | SMITH    | CLERK     | 7902 | 1980-12-17 |  800.00 |    NULL |     20 |</span><br><span class="line">|  7499 | ALLEN    | SALESMAN  | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD     | SALESMAN  | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7566 | JONES    | MANAGER   | 7839 | 1981-04-02 | 2975.00 |    NULL |     20 |</span><br><span class="line">|  7654 | MARTIN   | SALESMAN  | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7698 | BLAKE    | MANAGER   | 7839 | 1981-05-01 | 2850.00 |    NULL |     30 |</span><br><span class="line">|  7782 | CLARK    | MANAGER   | 7839 | 1981-06-09 | 2450.00 |    NULL |     10 |</span><br><span class="line">|  7788 | SCOTT    | ANALYST   | 7566 | 1987-04-19 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7839 | KING     | PRESIDENT | NULL | 1981-11-17 | 5000.00 |    NULL |     10 |</span><br><span class="line">|  7844 | TURNER   | SALESMAN  | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  7876 | ADAMS    | CLERK     | 7788 | 1987-05-23 | 1100.00 |    NULL |     20 |</span><br><span class="line">|  7900 | JAMES    | CLERK     | 7698 | 1981-12-03 |  950.00 |    NULL |     30 |</span><br><span class="line">|  7902 | FORD     | ANALYST   | 7566 | 1981-12-03 | 3000.00 |    NULL |     20 |</span><br><span class="line">|  7934 | MILLER   | CLERK     | 7782 | 1982-01-23 | 1300.00 |    NULL |     10 |</span><br><span class="line">|  9999 | zhangsan | MANAGER   | NULL | NULL       | 3000.00 |  500.00 |     10 |</span><br><span class="line">+-------+----------+-----------+------+------------+---------+---------+--------+</span><br><span class="line">15 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; delete from EMP where comm is null;</span><br><span class="line">Query OK, 10 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from EMP;</span><br><span class="line">+-------+----------+----------+------+------------+---------+---------+--------+</span><br><span class="line">| EMPNO | ENAME    | JOB      | MGR  | HIREDATE   | SAL     | COMM    | DEPTNO |</span><br><span class="line">+-------+----------+----------+------+------------+---------+---------+--------+</span><br><span class="line">|  7499 | ALLEN    | SALESMAN | 7698 | 1981-02-20 | 1600.00 |  300.00 |     30 |</span><br><span class="line">|  7521 | WARD     | SALESMAN | 7698 | 1981-02-22 | 1250.00 |  500.00 |     30 |</span><br><span class="line">|  7654 | MARTIN   | SALESMAN | 7698 | 1981-09-28 | 1250.00 | 1400.00 |     30 |</span><br><span class="line">|  7844 | TURNER   | SALESMAN | 7698 | 1981-09-08 | 1500.00 |    0.00 |     30 |</span><br><span class="line">|  9999 | zhangsan | MANAGER  | NULL | NULL       | 3000.00 |  500.00 |     10 |</span><br><span class="line">+-------+----------+----------+------+------------+---------+---------+--------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="创建表加入约束"><a href="#创建表加入约束" class="headerlink" title="创建表加入约束"></a><font color="#f2711c">创建表加入约束</font></h5><div class="info">

<blockquote>
<p>常见的约束</p>
<ul>
<li>非空约束，not null</li>
<li>唯一约束，unique</li>
<li>主键约束，primary key</li>
<li>外键约束，foreign key</li>
<li>自定义检查约束，check（不建议使用）（在mysql中现在还不支持）</li>
</ul>
</blockquote>
</div>

<h6 id="非空约束，not-null"><a href="#非空约束，not-null" class="headerlink" title="非空约束，not null"></a><font color="#f2711c">非空约束，not null</font></h6><p>非空约束，针对某个字段设置其值不为空，如：学生的姓名不能为空</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student; </span><br><span class="line">create table t_student(</span><br><span class="line">	student_id  	int(10),</span><br><span class="line">	student_name 	varchar(20) not null,</span><br><span class="line">	sex		char(2)  default  &#x27;m&#x27;,</span><br><span class="line">	birthday	date, </span><br><span class="line">	email		varchar(30),</span><br><span class="line">	classes_id	int(3)	</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">insert into t_student(student_id, birthday, email, classes_id) </span><br><span class="line">values</span><br><span class="line">(1002, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10)</span><br></pre></td></tr></table></figure>

<h6 id="唯一约束，unique"><a href="#唯一约束，unique" class="headerlink" title="唯一约束，unique"></a><font color="#f2711c">唯一约束，unique</font></h6><div class="info">
唯一性约束修饰的字段具有唯一性，不能重复。但可以为null。
</div>

<blockquote>
<p>案例：给某一列添加unique</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> drop table if exists t_user;</span><br><span class="line"> create table t_user(</span><br><span class="line"> id int,</span><br><span class="line">username varchar(255) unique  //列级约束</span><br><span class="line">);</span><br><span class="line">insert into t_user values(1,&#x27;zhangsan&#x27;);		</span><br><span class="line">insert into t_user values(2,&#x27;zhangsan&#x27;);  //出现编译错误，唯一性约束，该字段与上一行字段重复，但可以为null！</span><br><span class="line">ERROR 1062 (23000) : Duplicate entry &#x27;zhangsan&#x27; for key &#x27;username&#x27;</span><br><span class="line"></span><br><span class="line">insert into t_user(id) values(2);</span><br><span class="line">       insert into t_user(id) values(3);</span><br><span class="line">insert into t_user(id) values(4);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>案例：给两个列或者多个列添加unique</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">    id int,</span><br><span class="line">    usercode varchar(255),</span><br><span class="line">    username varchar(255),</span><br><span class="line">    unique(usercode,username)  //多个字段联合起来添加一个约束unique 【表级约束】</span><br><span class="line">	  );</span><br><span class="line"></span><br><span class="line">insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);</span><br><span class="line">insert into t_user values(3,&#x27;222&#x27;,&#x27;zs&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line">insert into t_user values(4,&#x27;111&#x27;,&#x27;zs&#x27;);  //出现编译错误！</span><br><span class="line">ERROR 1062 (23000) : Duplicate entry &#x27;111-zs&#x27; for key &#x27;usercode&#x27;</span><br><span class="line"></span><br><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_suer(</span><br><span class="line">    id int,</span><br><span class="line">    usercode varchar(255) unique,</span><br><span class="line">    username varchar(255) unique</span><br><span class="line">  );</span><br><span class="line">insert into t_user values(1,&#x27;111&#x27;,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user values(2,&#x27;111&#x27;,&#x27;ls&#x27;);</span><br><span class="line">ERROR 1062 (23000) : Duplicate entry &#x27;111&#x27; for key &#x27;usercode&#x27;</span><br></pre></td></tr></table></figure>
<div class="danger">
 注意：not null约束只有列级约束，没有表级约束。
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student; </span><br><span class="line">create table t_student(</span><br><span class="line">	student_id  	int(10),</span><br><span class="line">	student_name 	varchar(20) not null,</span><br><span class="line">	sex		char(2)  default  &#x27;m&#x27;,</span><br><span class="line">	birthday	date, </span><br><span class="line">	email		varchar(30)  unique,</span><br><span class="line">	classes_id	int(3)	</span><br><span class="line">)</span><br><span class="line">insert into t_student(student_id, student_name , sex, birthday, email, classes_id) </span><br><span class="line">values</span><br><span class="line">(1001,&#x27;zhangsan&#x27;,&#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10)</span><br></pre></td></tr></table></figure>
以上插入了重复的email，所以出现了“违反唯一约束错误”，所以unique起作用了，同样可以为唯一约束起个约束名。
<div class="info">

<ul>
<li>查看约束</li>
</ul>
</div>

<p>关于约束名称可以到table_constraints中查询</p>
<blockquote>
<p>mysql&gt; use information_schema;</p>
</blockquote>
<blockquote>
<p>mysql&gt; select * from table_constraints where table_name = ‘t_student’;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use information_schema;</span><br><span class="line">Reading table information for completion of table and column names</span><br><span class="line">You can turn off this feature to get a quicker startup with -A</span><br><span class="line"></span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; select * from table_constraints where table_name = &#x27;t_student&#x27;;</span><br><span class="line">+--------------------+-------------------+-----------------+--------------+------------+-----------------+</span><br><span class="line">| CONSTRAINT_CATALOG | CONSTRAINT_SCHEMA | CONSTRAINT_NAME | TABLE_SCHEMA | TABLE_NAME | CONSTRAINT_TYPE |</span><br><span class="line">+--------------------+-------------------+-----------------+--------------+------------+-----------------+</span><br><span class="line">| def                | baishu_demo       | PRIMARY         | baishu_demo  | t_student  | PRIMARY KEY     |</span><br><span class="line">+--------------------+-------------------+-----------------+--------------+------------+-----------------+</span><br><span class="line">1 row in set (0.03 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<div class="info">

<ul>
<li>约束的名称我们也可以自定义</li>
</ul>
</div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student; </span><br><span class="line">create table t_student(</span><br><span class="line">	student_id  	int(10),</span><br><span class="line">	student_name 	varchar(20) not null,</span><br><span class="line">	sex		char(2)  default  &#x27;m&#x27;,</span><br><span class="line">	birthday	date, </span><br><span class="line">  email		varchar(30)  ,</span><br><span class="line">	classes_id	int(3)	,</span><br><span class="line">  constraint email_unique unique(email) /*表级约束*/</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h6 id="主键约束，primary-key"><a href="#主键约束，primary-key" class="headerlink" title="主键约束，primary key"></a><font color="#f2711c">主键约束，primary key</font></h6><blockquote>
<p>怎么给一张表添加主键约束呢？</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_user;</span><br><span class="line">      create table t_user(</span><br><span class="line">          id int primary key,  //列级约束</span><br><span class="line">	  username varchar(255),</span><br><span class="line">	  email varchar(255)</span><br><span class="line">      );</span><br><span class="line">      insert into t_user(id,username,email) values(1,&#x27;zs&#x27;,&#x27;zs@123.com&#x27;);</span><br><span class="line">      insert into t_user(id,username,email) values(2,&#x27;ls&#x27;,&#x27;ls@123.com&#x27;);</span><br><span class="line">      insert into t_user(id,username,email) values(3,&#x27;ww&#x27;,&#x27;ww@123.com&#x27;);</span><br><span class="line">      select * from t_user;</span><br><span class="line">      +-----------------------------+</span><br><span class="line">      | id | username | email       |</span><br><span class="line">      +-----------------------------+</span><br><span class="line">      |  1 | zs       | zs@123.com  |</span><br><span class="line">      |  2 | ls       | ls@123.com  |</span><br><span class="line">      |  3 | ww       | ww@123.com  |</span><br><span class="line">      +----+----------+-------------+</span><br><span class="line"></span><br><span class="line">      insert into t_user(id,username,email) values(1,&#x27;jack&#x27;,&#x27;jack@123.com&#x27;);  //出现编译错误，主键约束，不能为null也不能重复！</span><br><span class="line">      ERROR 1364 (HY000) : Field &#x27;id&#x27; doesn&#x27;t have a default value</span><br></pre></td></tr></table></figure>
<div class="danger">

<p>根据以上的测试得出：id是主键，因为添加了主键约束，主键字段中的数据不能为null，也不能重复。</p>
<blockquote>
<p>主键的特点：不能为null，也不能重复</p>
</blockquote>
</div>

<blockquote>
<p>主键相关的术语？</p>
</blockquote>
<div class="info">

<p>主键约束 : primary key<br>主键字段 : id字段添加primary key之后，id叫做主键字段<br>主键值 : id字段中的每一个值都是主键值。</p>
</div>

<blockquote>
<p>主键有什么作用？</p>
</blockquote>
<div>

<ol>
<li>根据主键字段的字段数量来划分：</li>
</ol>
<ul>
<li>单一主键 (推荐的，常用的。)</li>
<li>复合主键(多个字段联合起来添加一个主键约束) (复合主键不建议使用，因为复合主键违背三范式。)</li>
</ul>
<ol start="2">
<li>根据主键性质来划分：</li>
</ol>
<ul>
<li>自然主键 ：主键值最好就是一个和业务没有任何关系的自然数。(这种方式是推荐的)</li>
<li>业务主键 : 主键值和系统的业务挂钩，例如：拿着银行卡的卡号做主键、拿着身份证号做为主键。(不推荐使用)最好不要拿着和业务挂钩的字段做为主键。因为以后的业务一旦发生改变的时候，主键也可能需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键重复。</div></li>
</ul>
<blockquote>
<p>一张表的主键约束只能有1个。(必须记住)</p>
</blockquote>
<blockquote>
<p> 使用表级约束方式定义主键：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int,</span><br><span class="line">username varchar(255),</span><br><span class="line">primary key(id)</span><br><span class="line">);</span><br><span class="line">insert into t_user(id,username) values(1,&#x27;zs&#x27;);</span><br><span class="line">insert into t_user(id,username) values(2,&#x27;ls&#x27;);</span><br><span class="line">insert into t_user(id,username) values(3,&#x27;ws&#x27;);</span><br><span class="line">insert into t_user(id,username) values(4,&#x27;cs&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line"></span><br><span class="line">insert into t_user(id,username) values(3,&#x27;cx&#x27;);  //出现编译错误！</span><br><span class="line">ERROR 1062 (23000) : Duplicate entry &#x27;4&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line"></span><br><span class="line">以下内容是演示一下复合主键，不需要掌握：</span><br><span class="line">  drop table if exists t_user;</span><br><span class="line">  create table t_user(</span><br><span class="line">  id int,</span><br><span class="line">  username varchar(255),</span><br><span class="line">  password varchar(255),</span><br><span class="line">  primary key(id,username)</span><br><span class="line">  );</span><br><span class="line">  insert ......</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mysql提供主键值自增：(非常重要。)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_user;</span><br><span class="line">create table t_user(</span><br><span class="line">id int primary key auto_increment,  //id字段自动维护一个自增的数字，从1开始，以1递增。</span><br><span class="line">username varchar(255)</span><br><span class="line">);</span><br><span class="line">insert into t_user(username) values(&#x27;a&#x27;); </span><br><span class="line">insert into t_user(username) values(&#x27;b&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;c&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;d&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;e&#x27;);</span><br><span class="line">insert into t_user(username) values(&#x27;f&#x27;);</span><br><span class="line">select * from t_user;</span><br><span class="line"></span><br><span class="line">提示：Oracle当中也提供了一个自增机制，叫做：序列(sequence)对象。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用列级约束定义主键：</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_student(</span><br><span class="line">    -&gt; student_id int(10) primary key,/* 列级约束 */</span><br><span class="line">    -&gt; student_name varchar(20) not null,</span><br><span class="line">    -&gt; sex char(2) default &#x27;m&#x27;,</span><br><span class="line">    -&gt; birthday date,</span><br><span class="line">    -&gt; email varchar(30),</span><br><span class="line">    -&gt; classes_id int(3)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br><span class="line">mysql&gt; insert into t_student(student_id, student_name , sex, birthday, email, classes_id)</span><br><span class="line">    -&gt; values</span><br><span class="line">    -&gt; (1001,&#x27;zhangsan&#x27;,&#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">mysql&gt; insert into t_student(student_id, student_name , sex, birthday, email, classes_id)</span><br><span class="line">    -&gt; values</span><br><span class="line">    -&gt; (1001,&#x27;zhangsan&#x27;,&#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10);</span><br><span class="line">ERROR 1062 (23000): Duplicate entry &#x27;1001&#x27; for key &#x27;PRIMARY&#x27;</span><br><span class="line">向以上表中加入学号为1001的两条记录，出现如下错误，因为加入了主键约束</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可通过表级约束为约束起个名称</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student; </span><br><span class="line">create table t_student(</span><br><span class="line">	student_id  	int(10),</span><br><span class="line">	student_name 	varchar(20) not null,</span><br><span class="line">	sex		char(2)  default  &#x27;m&#x27;,</span><br><span class="line">	birthday	date, </span><br><span class="line">	email		varchar(30)  ,</span><br><span class="line">	classes_id	int(3),</span><br><span class="line">    CONSTRAINT p_id PRIMARY key (student_id)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h6 id="外键约束，foreign-key"><a href="#外键约束，foreign-key" class="headerlink" title="外键约束，foreign key"></a><font color="#f2711c">外键约束，foreign key</font></h6><blockquote>
<p>关于外键约束的相关术语：</p>
</blockquote>
<div class="info">

<p>主键约束 : foreign key<br>主键字段 : 添加有外键约束的字段<br>主键值 : 外键字段中的每一个值。</p>
</div>

<blockquote>
<p>业务背景：<br>请设计数据库表，用来维护学生和班级的信息？</p>
</blockquote>
<ol>
<li> 第一种方案：一张表存储所有数据<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">no(pk)          name          classno         classname</span><br><span class="line">-----------------------------------------------------------</span><br><span class="line"> 1               zs1            101          河南省平顶山市舞钢市垭口一高高三1班         </span><br><span class="line"> 2               zs2            101          河南省平顶山市舞钢市垭口一高高三1班 </span><br><span class="line"> 3               zs3            102          河南省平顶山市舞钢市垭口一高高三2班 </span><br><span class="line"> 4               zs4            102          河南省平顶山市舞钢市垭口一高高三2班</span><br><span class="line"> 5               zs5            102          河南省平顶山市舞钢市垭口一高高三2班 </span><br><span class="line"> 缺点：冗余。【不推荐】</span><br></pre></td></tr></table></figure></li>
<li>两张表(班级表和学生表)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">t_class 班级表</span><br><span class="line">cno(pk)         cname</span><br><span class="line">-------------------------------------------------------------</span><br><span class="line">        101           河南省平顶山市舞钢市垭口一高高三1班 </span><br><span class="line"> 102           河南省平顶山市舞钢市垭口一高高三2班 </span><br><span class="line"></span><br><span class="line"> t_student 学生表</span><br><span class="line"> sno(pk)        sname          classno(该字段添加外键约束fk)</span><br><span class="line"> -----------------------------------------------------------</span><br><span class="line">  1              zs1              101</span><br><span class="line">  2              zs2              101</span><br><span class="line">  3              zs3              102</span><br><span class="line">  4              zs4              102</span><br><span class="line">  5              zs5              102</span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>将以上表的建表语句写出来<br>t_student中的classno字段引用t_class表中的cno字段，此时t_student表叫做子表。t_class表叫做父表。</p>
</blockquote>
<p>删除数据的时候，先删除子表，再删除父表。<br>添加数据的时候，先添加父表，再添加子表。<br>创建表的时候，先创建父表，再创建子表。<br>删除表的时候，先删除子表，再删除父表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student;</span><br><span class="line">drop table if exists t_class;</span><br><span class="line"></span><br><span class="line">create table t_class(</span><br><span class="line"> cno int,</span><br><span class="line"> cname varchar(255),</span><br><span class="line"> primary key(cno)</span><br><span class="line"> );</span><br><span class="line"></span><br><span class="line"> create table t_student(</span><br><span class="line">   sno int,</span><br><span class="line">   sname varchar(255),</span><br><span class="line">   classno int,</span><br><span class="line">   primary key(sno),</span><br><span class="line">   foreign key(classno) references t_class(cno)</span><br><span class="line"> );</span><br><span class="line"> </span><br><span class="line"> insert into t_class values(101,&#x27;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#x27;);</span><br><span class="line"> insert into t_class values(102,&#x27;yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy&#x27;);</span><br><span class="line"></span><br><span class="line"> insert into t_student values(1,&#x27;zs1&#x27;,101);</span><br><span class="line"> insert into t_student values(2,&#x27;zs2&#x27;,101);</span><br><span class="line"> insert into t_student values(3,&#x27;zs3&#x27;,102);</span><br><span class="line"> insert into t_student values(4,&#x27;zs4&#x27;,102);</span><br><span class="line"> insert into t_student values(5,&#x27;zs5&#x27;,102);</span><br><span class="line"> insert into t_student values(6,&#x27;zs6&#x27;,102);</span><br><span class="line"> select * from t_class;</span><br><span class="line"> select * from t_student;</span><br><span class="line"></span><br><span class="line"> insert into t_student values(7,&#x27;lisi&#x27;,103);  //编译错误，引用的103，父表中没有该字段！</span><br><span class="line"> ERROR 1452 (23000) : Cannot add or update a child row :aforeign key constraint fails (bjpowernode INT YT......)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>外键值可以为NULL？<br> 外键可以为null。</p>
</blockquote>
<blockquote>
<p>外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？<br> 注意：被引用的字段不一定是主键，但至少是具有unique约束，具有唯一性，不可重复！</p>
</blockquote>
<p>详细步骤如下：</p>
<div class="info">

<ul>
<li>首先建立班级表t_classes</li>
</ul>
</div>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_classes(</span><br><span class="line">    -&gt; classes_id int(3),</span><br><span class="line">    -&gt; classes_name varchar(40),</span><br><span class="line">    -&gt; constraint pk_classes_id primary key(classes_id)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.01 sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<div class="info">

<ul>
<li>在t_student中加入外键约束</li>
</ul>
</div>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_student(</span><br><span class="line">    -&gt; student_id int(10),</span><br><span class="line">    -&gt; student_name varchar(20),</span><br><span class="line">    -&gt; sex char(2),</span><br><span class="line">    -&gt; birthday date,</span><br><span class="line">    -&gt; email varchar(30),</span><br><span class="line">    -&gt; classes_id int(3),</span><br><span class="line">    -&gt; constraint student_id_pk primary key(student_id),</span><br><span class="line">    -&gt; constraint fk_classes_id foreign key(classes_id) references t_classes(classes_id)</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 0 rows affected (0.02 sec)</span><br></pre></td></tr></table></figure>

<div class="info">

<ul>
<li>向t_student中加入数据</li>
</ul>
</div>

<blockquote>
<p>insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, ‘zhangsan’, ‘m’, ‘1988-01-01’, ‘<a href="mailto:&#x71;&#113;&#113;&#x40;&#x31;&#54;&#51;&#46;&#99;&#111;&#x6d;">&#x71;&#113;&#113;&#x40;&#x31;&#54;&#51;&#46;&#99;&#111;&#x6d;</a>‘, 10)</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, &#x27;zhangsan&#x27;, &#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10);</span><br><span class="line">ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`baishu_demo`.`t_student`, CONSTRAINT `fk_classes_id` FOREIGN KEY (`classes_id`) REFERENCES `t_classes` (`classes_id`))</span><br><span class="line"></span><br><span class="line">出现错误，因为在班级表中不存在班级编号为10班级，外键约束起到了作用</span><br><span class="line">存在外键的表就是子表，参照的表就是父表，所以存在一个父子关系，也就是主从关系，主表就是班级表，从表就是学生表 </span><br></pre></td></tr></table></figure>

<p>当classes_id设置为null，成功</p>
<blockquote>
<p>insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, ‘zhangsan’, ‘m’, ‘1988-01-01’, ‘<a href="mailto:&#113;&#x71;&#113;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#109;">&#113;&#x71;&#113;&#x40;&#x31;&#54;&#51;&#x2e;&#99;&#x6f;&#109;</a>‘, null);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, &#x27;zhangsan&#x27;, &#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, null);</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure>
<div class="danger">
以上成功的插入了学生信息，当时classes_id没有值，这样会影响参照完整性，所以我们建议将外键字段设置为非空
</div>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_student;</span><br><span class="line">create table t_student(</span><br><span class="line">	student_id  	int(10),</span><br><span class="line">	student_name 	varchar(20),</span><br><span class="line">	sex		char(2),</span><br><span class="line">	birthday	date,</span><br><span class="line">	email		varchar(30),</span><br><span class="line">	classes_id	int (3) not null,</span><br><span class="line">	constraint  student_id_pk primary key(student_id),</span><br><span class="line">	constraint	fk_classes_id foreign key(classes_id) references t_classes(classes_id)	     </span><br><span class="line">)</span><br><span class="line">insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, &#x27;zhangsan&#x27;, &#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, null);</span><br></pre></td></tr></table></figure>
<p>再次插入班级编号为null的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_student(student_id, student_name, sex, birthday, email, classes_id) values(1001, &#x27;zhangsan&#x27;, &#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, null);</span><br><span class="line">ERROR 1048 (23000): Column &#x27;classes_id&#x27; cannot be null</span><br></pre></td></tr></table></figure>

<div class="info">
添加数据到班级表，添加数据到学生表，删除班级数据，将会出现如下错误：
</div>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_classes (classes_id,classes_name) values (10,&#x27;366&#x27;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_student(</span><br><span class="line">    -&gt; student_id, student_name, sex, birthday, email, classes_id</span><br><span class="line">    -&gt; ) values (</span><br><span class="line">    -&gt; 1001, &#x27;zhangsan&#x27;, &#x27;m&#x27;, &#x27;1988-01-01&#x27;, &#x27;qqq@163.com&#x27;, 10</span><br><span class="line">    -&gt; );</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_classes set  classes_id = 20 where classes_name = &#x27;366&#x27;;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`baishu_demo`.`t_student`, CONSTRAINT `fk_classes_id` FOREIGN KEY (`classes_id`) REFERENCES `t_classes` (`classes_id`))</span><br></pre></td></tr></table></figure>
<div class="danger">
因为子表（t_student）存在一个外键classes_id，它参照了父表（t_classes）中的主键，所以先删除子表中的引用记录，再修改父表中的数据。
</div>

<blockquote>
<p>delete from t_classes where classes_id = 10;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; delete from t_classes where classes_id = 10;</span><br><span class="line">ERROR 1451 (23000): Cannot delete or update a parent row: a foreign key constraint fails (`baishu_demo`.`t_student`, CONSTRAINT `fk_classes_id` FOREIGN KEY (`classes_id`) REFERENCES `t_classes` (`classes_id`))</span><br><span class="line">因为子表（t_student）存在一个外键classes_id，它参照了父表（t_classes）中的主键，所以先删除父表，那么将会影响子表的参照完整性，所以正确的做法是，先删除子表中的数据，再删除父表中的数据，采用drop table也不行，必须先drop子表，再drop父表</span><br><span class="line">我们也可以采取以下章节的措施 级联删除。</span><br></pre></td></tr></table></figure>

<h6 id="级联更新与级联删除"><a href="#级联更新与级联删除" class="headerlink" title="级联更新与级联删除"></a><font color="#f2711c">级联更新与级联删除</font></h6><div class="info">
on update cascade;
</div>
<div class="danger">
mysql对有些约束的修改比较麻烦，所以我们可以先删除，再添加
我们只修改了父表中的数据，子表中的数据也会跟着变动。
</div>

<blockquote>
<p>alter table t_student drop foreign key fk_classes_id;</p>
</blockquote>
<blockquote>
<p>alter table t_student add constraint fk_classes_id_1 foreign key(classes_id) references t_classes(classes_id)  on update cascade;</p>
</blockquote>
<blockquote>
<p>update t_classes set classes_id = 20 where classes_name = ‘366’;</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter table t_student drop foreign key fk_classes_id;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">Records: 0  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; alter table t_student add constraint fk_classes_id_1 foreign key(classes_id) references t_classes(classes_id)  on update cascade;</span><br><span class="line">Query OK, 1 row affected (0.04 sec)</span><br><span class="line">Records: 1  Duplicates: 0  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; update t_classes set classes_id = 20 where classes_name = &#x27;366&#x27;;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">Rows matched: 1  Changed: 1  Warnings: 0</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_classes;</span><br><span class="line">+------------+--------------+</span><br><span class="line">| classes_id | classes_name |</span><br><span class="line">+------------+--------------+</span><br><span class="line">|         20 | 366          |</span><br><span class="line">+------------+--------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_student;</span><br><span class="line">+------------+--------------+------+------------+-------------+------------+</span><br><span class="line">| student_id | student_name | sex  | birthday   | email       | classes_id |</span><br><span class="line">+------------+--------------+------+------------+-------------+------------+</span><br><span class="line">|       1001 | zhangsan     | m    | 1988-01-01 | qqq@163.com |         20 |</span><br><span class="line">+------------+--------------+------+------------+-------------+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc t_student;</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type        | Null | Key | Default | Extra |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">| student_id   | int(10)     | NO   | PRI | NULL    |       |</span><br><span class="line">| student_name | varchar(20) | YES  |     | NULL    |       |</span><br><span class="line">| sex          | char(2)     | YES  |     | NULL    |       |</span><br><span class="line">| birthday     | date        | YES  |     | NULL    |       |</span><br><span class="line">| email        | varchar(30) | YES  |     | NULL    |       |</span><br><span class="line">| classes_id   | int(3)      | NO   | MUL | NULL    |       |</span><br><span class="line">+--------------+-------------+------+-----+---------+-------+</span><br><span class="line">6 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure>

<div class="info">
on delete cascade;
</div>
<div class="danger">
mysql对有些约束的修改时不支持的，所以我们可以先删除，再添加
</div>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alter table t_student drop foreign key fk_classes_id;</span><br><span class="line"></span><br><span class="line">alter table t_student add constraint fk_classes_id_1 foreign key(classes_id) references t_classes(classes_id) on delete cascade;</span><br><span class="line"></span><br><span class="line">delete from t_classes where classes_id = 20;</span><br></pre></td></tr></table></figure>

<h5 id="t-student和t-classes完整示例"><a href="#t-student和t-classes完整示例" class="headerlink" title="t_student和t_classes完整示例"></a><font color="#f2711c">t_student和t_classes完整示例</font></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">drop table if exists t_classes;</span><br><span class="line">create table t_classes(</span><br><span class="line">	classes_id	int (3),</span><br><span class="line">	classes_name	varchar(30)	not null,</span><br><span class="line">	constraint	pk_classes_id	primary key(classes_id) </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">drop table if exists t_student;</span><br><span class="line">create table t_student(</span><br><span class="line">	student_id	int(10),</span><br><span class="line">	student_name 	varchar(50) not null,</span><br><span class="line">	sex		char(2) not null,</span><br><span class="line">	birthday	date not null,</span><br><span class="line">	email		varchar(30) unique,</span><br><span class="line">	classes_id	int (3) not null,</span><br><span class="line">	constraint	pk_student_id	primary key(student_id),</span><br><span class="line">	constraint	fk_classes_id	foreign key(classes_id) references t_classes(classes_id) </span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="存储引擎"><a href="#存储引擎" class="headerlink" title="存储引擎"></a><font color="#f2711c">存储引擎</font></h4><h5 id="完整的建表语句"><a href="#完整的建表语句" class="headerlink" title="完整的建表语句"></a><font color="#f2711c">完整的建表语句</font></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `t_x` (</span><br><span class="line">`id` int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8; </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<div class="danger">

<blockquote>
<p>注意：在MySQL当中，凡是标识符使用飘号括起来的。最好别用，不通用。<br>建表的时候可以指定存储引擎，也可以指定字符集。<br>mysql默认使用的存储引擎是InnoDB方式。默认采用的字符集是UTF-8。</p>
</blockquote>
</div>

<h5 id="什么是存储引擎呢？"><a href="#什么是存储引擎呢？" class="headerlink" title="什么是存储引擎呢？"></a><font color="#f2711c">什么是存储引擎呢？</font></h5><p>存储引擎这个名字只有在mysql中存在。(Oracle中有对应的机制，但不叫做存储引擎。Oracle中没有特殊的名字，就是”表的存储方式”)<br>mysql支持很多存储引擎，每个存储引擎都对应了一种不同的存储方式。<br>每一个存储引擎都有自己的优缺点，需要在合适的时机选择合适的存储引擎。</p>
<h5 id="查看当前mysql支持的存储引擎？"><a href="#查看当前mysql支持的存储引擎？" class="headerlink" title="查看当前mysql支持的存储引擎？"></a><font color="#f2711c">查看当前mysql支持的存储引擎？</font></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">ysql&gt; show engines \G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">      Engine: InnoDB</span><br><span class="line">     Support: DEFAULT</span><br><span class="line">     Comment: Supports transactions, row-level locking, and foreign keys</span><br><span class="line">Transactions: YES</span><br><span class="line">          XA: YES</span><br><span class="line">  Savepoints: YES</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">      Engine: MRG_MYISAM</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Collection of identical MyISAM tables</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 3. row ***************************</span><br><span class="line">      Engine: MEMORY</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Hash based, stored in memory, useful for temporary tables</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 4. row ***************************</span><br><span class="line">      Engine: BLACKHOLE</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: /dev/null storage engine (anything you write to it disappears)</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 5. row ***************************</span><br><span class="line">      Engine: MyISAM</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: MyISAM storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 6. row ***************************</span><br><span class="line">      Engine: CSV</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: CSV storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 7. row ***************************</span><br><span class="line">      Engine: ARCHIVE</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Archive storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 8. row ***************************</span><br><span class="line">      Engine: PERFORMANCE_SCHEMA</span><br><span class="line">     Support: YES</span><br><span class="line">     Comment: Performance Schema</span><br><span class="line">Transactions: NO</span><br><span class="line">          XA: NO</span><br><span class="line">  Savepoints: NO</span><br><span class="line">*************************** 9. row ***************************</span><br><span class="line">      Engine: FEDERATED</span><br><span class="line">     Support: NO</span><br><span class="line">     Comment: Federated MySQL storage engine</span><br><span class="line">Transactions: NULL</span><br><span class="line">          XA: NULL</span><br><span class="line">  Savepoints: NULL</span><br><span class="line">9 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h5 id="常见的存储引擎？"><a href="#常见的存储引擎？" class="headerlink" title="常见的存储引擎？"></a><font color="#f2711c">常见的存储引擎？</font></h5><p>  Engine: MyISAM<br>  Support: YES<br>  Comment: MyISAM storage engine<br>    Transactions: NO<br>  XA: NO<br>  Savepoints: NO</p>
<p>  MyISAM这种存储引擎不支持事务。<br>  MyISAM是mysql最常用的存储引擎，但是这种存储引擎不是默认的。<br>  MyISAM采用三个文件组织一个表：<br>  xxx.frm(存储格式的文件)<br>    xxx.MYD(存储表中数据的文件)<br>    xxx.MYI(存储表中索引的文件)<br>      优点：可被压缩，节省存储空间。并且可以转换为只读表，提高检索效率。<br>      缺点:不支持事务。</p>
<hr>
<p>  Engine: InnoDB<br>  Support: DEFAULT<br>  Comment: Supports transactions, row-level locking, and foreign keys<br>    Transactions: YES<br>  XA: YES<br>  Savepoints: YES</p>
<p>  优点：支持事务、行级锁、外键等。这种存储引擎数据的安全得到保障。</p>
<p>  表的结构存储在xxx.frm文件中<br>  数据存储在tablespace这样的表空间中(逻辑概念)，无法被压缩，无法转换成只读。<br>  这种InnoDB存储引擎在MySQL数据库崩溃之后提供自动恢复机制。<br>  InoDB支持级联删除和级联更新。</p>
<hr>
<p>  Engine: MEMORY<br>  Support: YES<br>  Comment: Hash based, stored in memory, useful for temporary tables<br>    Transactions: NO<br>  XA: NO<br>  Savepoints: NO</p>
<p>  缺点：不支持事务。数据容易丢失。因为所有数据和索引都是存储在内存当中的。<br>  优点：查询速度最快。<br>  以前叫做HEPA引擎。</p>
<h4 id="事务"><a href="#事务" class="headerlink" title="事务"></a><font color="#f2711c">事务</font></h4><h5 id="什么是事务？"><a href="#什么是事务？" class="headerlink" title="什么是事务？"></a><font color="#f2711c">什么是事务？</font></h5><p>一个事务是一个完整的业务逻辑单元，不可再分。</p>
<ul>
<li>比如：银行账户，从A账户向B账户转账10000元，需要执行两条update语句。<blockquote>
<p>update t_act set balance = balance - 10000 where actno = ‘act-001’;<br>update t_act set balance = balance + 10000 where actno = ‘act-002’;</p>
</blockquote>
</li>
</ul>
<p>以上两条DML语句必须同时成功，或者同时失败，不允许出现一条成功，一条失败。<br>想要保证以上的两条DML语句同时成功或者同时失败，那么就要使用数据库的”事务机制”。</p>
<h5 id="和事务相关的语句只有：DML语句。-insert-delete-update"><a href="#和事务相关的语句只有：DML语句。-insert-delete-update" class="headerlink" title="和事务相关的语句只有：DML语句。(insert delete update)"></a><font color="#f2711c">和事务相关的语句只有：DML语句。(insert delete update)</font></h5><div class="danger">为什么？</div>
因为他们这三个语句都是和数据库表当中的"数据"相关的。
事务的存在是为了保证数据的完整性，安全性。

<h5 id="假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？"><a href="#假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？" class="headerlink" title="假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？"></a><font color="#f2711c">假设所有的业务都能使用1条DML语句搞定，还需要事务机制吗？</font></h5><p>不需要事务机制。<br>但实际情况不是这样的，通常一个”事儿(事务【业务】)”需要多条DML语句共同联合完成。</p>
<h5 id="事务的特性？"><a href="#事务的特性？" class="headerlink" title="事务的特性？"></a><font color="#f2711c">事务的特性？</font></h5><p>事务包括四大特性：ACID<br>A:原子性：事务是最小的工作单元，不可再分。<br>B:一致性：事务必须保证多条DML语句同时成功或者同时失败。<br>C:隔离性：事务A与事务B之间具有隔离。<br>D:持久性：持久性说的是最终数据必须持久化到硬盘中，事务才算成功结束。</p>
<h5 id="关于事务之间的隔离性？"><a href="#关于事务之间的隔离性？" class="headerlink" title="关于事务之间的隔离性？"></a><font color="#f2711c">关于事务之间的隔离性？</font></h5><p>事务隔离性存在隔离级别，理论上隔离级别包括4个：</p>
<ul>
<li>第一级别：读未提交(read uncommitted)<br>对方事务还没有提交，我们当前事务可以读取到对方未提交的数据。<br>读未提交存在脏读(Dirty Read) 现象：表示读到了脏数据。</li>
<li>第二级别：读已提交(read committed)<br>对方事务提交之后的数据我方可以读取到。<br>读已提交存在的问题是：不可重复读。</li>
<li>第三级别：可重复读(repeatable read)<br>这种隔离级别解决了：不可重复读问题。<br>这种隔离级别存在的问题是：读取到的数据是幻象。</li>
<li>第四级别：序列化读/串行化读<br>解决了所有问题。<br>效率低，需要事务排队。</li>
</ul>
<h5 id="演示事务"><a href="#演示事务" class="headerlink" title="演示事务"></a><font color="#f2711c">演示事务</font></h5><ul>
<li><p>mysql事务默认情况下是自动提交的。<br>(什么是自动提交？只要执行任意一条DML语句则提交一次。)怎么关闭默认提交？start transaction;</p>
</li>
<li><p>建表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create table t_user(</span><br><span class="line">    -&gt; id int primary key auto_increment,</span><br><span class="line">    -&gt; username varchar(255)</span><br><span class="line">    -&gt; );</span><br></pre></td></tr></table></figure></li>
<li><p>演示：mysql中的事务是支持自动提交的，只要执行一条DML语句，则提交一次。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; insert into t_user(username) values(&#x27;zs&#x27;);</span><br><span class="line">	   Querk OK, 1 row affected (0.03 sec)</span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">		+----+----------+</span><br><span class="line">		| id | username |</span><br><span class="line">		+----+----------+</span><br><span class="line">		|  1 | zs       |</span><br><span class="line">		+----+----------+</span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">	   Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">		 +----+----------+</span><br><span class="line">		 | id | username |</span><br><span class="line">		 +----+----------+</span><br><span class="line">		 |  1 | zs       |</span><br><span class="line">		 +----+----------+</span><br></pre></td></tr></table></figure></li>
<li><p>使用start transaction; 关闭自动提交机制。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">   mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">+----+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;lisi&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  2 | lisi     |</span><br><span class="line">+----+----------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;wangwu&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">|  2 | lisi     |</span><br><span class="line">|  3 | wangwu   |</span><br><span class="line">+----+----------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback;    //回滚</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+----------+</span><br><span class="line">| id | username |</span><br><span class="line">+----+----------+</span><br><span class="line">|  1 | zs       |</span><br><span class="line">+----+----------+</span><br><span class="line">1 row in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; start transaction;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;wangwu&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;object&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;joke&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; insert into t_user(username) values(&quot;xiaozhaozhao&quot;);</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+--------------+</span><br><span class="line">| id | username     |</span><br><span class="line">+----+--------------+</span><br><span class="line">|  1 | zs           |</span><br><span class="line">|  4 | wangwu       |</span><br><span class="line">|  5 | object       |</span><br><span class="line">|  6 | joke         |</span><br><span class="line">|  7 | xiaozhaozhao |</span><br><span class="line">+----+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; commit;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+--------------+</span><br><span class="line">| id | username     |</span><br><span class="line">+----+--------------+</span><br><span class="line">|  1 | zs           |</span><br><span class="line">|  4 | wangwu       |</span><br><span class="line">|  5 | object       |</span><br><span class="line">|  6 | joke         |</span><br><span class="line">|  7 | xiaozhaozhao |</span><br><span class="line">+----+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; rollback;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from t_user;</span><br><span class="line">+----+--------------+</span><br><span class="line">| id | username     |</span><br><span class="line">+----+--------------+</span><br><span class="line">|  1 | zs           |</span><br><span class="line">|  4 | wangwu       |</span><br><span class="line">|  5 | object       |</span><br><span class="line">|  6 | joke         |</span><br><span class="line">|  7 | xiaozhaozhao |</span><br><span class="line">+----+--------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>  rollback : 回滚。<br>  commit ： 提交。<br>  start transaction : 关闭自动提交机制。</p>
</li>
<li><p>演示两个事务，假如隔离级别：</p>
<pre><code> 演示第1级别：读未提交
     set global transaction isolation level read uncommitted;
 演示第二级别；读已提交
     set global transaction isolation level read committed;
 演示第三级别:可重复读
     set global transaction isolation level repeatable read;
</code></pre>
<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a><font color="#f2711c">索引</font></h4><h5 id="什么是索引？有什么用？"><a href="#什么是索引？有什么用？" class="headerlink" title="什么是索引？有什么用？"></a><font color="#f2711c">什么是索引？有什么用？</font></h5><p>索引就相当于一本书的目录，通过目录可以快速的找到对应的资源。<br>在数据库方面，查询一张表的时候又两种检索方式：<br>（1）全表扫描<br>（2）根据索引检索（效率很高）<br>索引为什么可以提高检索效率呢？<br>  其实最根本的原理是缩小了扫描的范围。</p>
</li>
</ul>
<p>索引虽然可以提高检索效率，但是不能随意的添加索引，因为索引也是数据库中的对象，也需要数据库不断的维护。是有维护成本的。<br>比如：表中的数据经常被修改，这样就不适合添加索引，因为数据一旦修改，索引需要重新排序，进行维护。</p>
<p>添加索引是指给某一个字段，或者说某些字段添加索引。</p>
<p>select ename,sal from EMP where ename = ‘SMITH’;<br>当ename字段没有添加索引的时候，以上sql语句会进行全表扫描，扫描ename字段中所有的值。<br>当ename字段添加索引的时候，以上sql语句会根据索引扫描，快速定位。</p>
<h5 id="怎么创建索引对象？怎么删除索引对象？"><a href="#怎么创建索引对象？怎么删除索引对象？" class="headerlink" title="怎么创建索引对象？怎么删除索引对象？"></a><font color="#f2711c">怎么创建索引对象？怎么删除索引对象？</font></h5><p>创建索引对象：<br>  create index 索引名称 on 表名(字段名);<br>删除索引对象：<br>  drop index 索引名称 on 表名;</p>
<h5 id="什么时候考虑给字段添加索引？-满足什么条件"><a href="#什么时候考虑给字段添加索引？-满足什么条件" class="headerlink" title="什么时候考虑给字段添加索引？(满足什么条件)"></a><font color="#f2711c">什么时候考虑给字段添加索引？(满足什么条件)</font></h5><ul>
<li>数据量庞大。(根据客户的需求，根据线上的环境)</li>
<li>该字段很少的DML操作。(因为字段进行修改操作，索引也需要维护)</li>
<li>该字段经常出现在where子句中。(经常根据哪个字段维护)</li>
</ul>
<h5 id="注意：主键具有unique约束的字段会自动添加索引"><a href="#注意：主键具有unique约束的字段会自动添加索引" class="headerlink" title="注意：主键具有unique约束的字段会自动添加索引"></a><font color="#f2711c">注意：主键具有unique约束的字段会自动添加索引</font></h5><p>根据主键查询效率较高，尽量根据主键检索。</p>
<h5 id="查看sql语句的执行计划"><a href="#查看sql语句的执行计划" class="headerlink" title="查看sql语句的执行计划"></a><font color="#f2711c">查看sql语句的执行计划</font></h5><blockquote>
<p>create index emp_sal_index on EMP(sal);</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; explain select ename,sal from EMP where sal = 5000;</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span><br><span class="line">| id | select_type | table | type | possible_keys | key  | key_len | ref  | rows | Extra       |</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span><br><span class="line">|  1 | SIMPLE      | EMP   | ALL  | NULL          | NULL | NULL    | NULL |   14 | Using where |</span><br><span class="line">+----+-------------+-------+------+---------------+------+---------+------+------+-------------+</span><br><span class="line"></span><br><span class="line">给薪资sal字段添加索引：</span><br><span class="line">create index emp_sal_index on EMP(sal);</span><br><span class="line"></span><br><span class="line">mysql&gt; explain select ename,sal from EMP where sal = 5000;</span><br><span class="line">+----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span><br><span class="line">| id | select_type | table | type | possible_keys | key           | key_len | ref   | rows | Extra       |</span><br><span class="line">+----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span><br><span class="line">|  1 | SIMPLE      | EMP   | ref  | emp_sal_index | emp_sal_index | 9       | const |    1 | Using where |</span><br><span class="line">+----+-------------+-------+------+---------------+---------------+---------+-------+------+-------------+</span><br><span class="line">rows检索次数减少了</span><br></pre></td></tr></table></figure>
<h5 id="索引底层采用的数据结构"><a href="#索引底层采用的数据结构" class="headerlink" title="索引底层采用的数据结构"></a><font color="#f2711c">索引底层采用的数据结构</font></h5><p>B + Tree</p>
<h5 id="索引的实现原理"><a href="#索引的实现原理" class="headerlink" title="索引的实现原理"></a><font color="#f2711c">索引的实现原理</font></h5><p>通过B Tree缩小扫描范围，底层索引进行了排序，分区，索引会携带数据在表中的”物理地址”，最终通过索引检索到数据之后，获取到关联的物理地址，<br>通过物理索引检索到数据之后，获取到关联的物理地址，通过物理地址定位表中的数据，效率是最高的。<br>select ename from EMP where ename = ‘SMITH’;<br>通过索引转换为：<br>select ename from EMP where  物理地址 = 0x123;</p>
<h5 id="索引的分类"><a href="#索引的分类" class="headerlink" title="索引的分类"></a><font color="#f2711c">索引的分类</font></h5><p>单一索引：给单个字段添加索引<br>复合索引：给多个字段联合起来添加一个索引<br>主键索引：主键上会自动添加索引<br>唯一索引：有unique约束的字段会自动添加索引<br>……</p>
<h5 id="索引什么时候失效？"><a href="#索引什么时候失效？" class="headerlink" title="索引什么时候失效？"></a><font color="#f2711c">索引什么时候失效？</font></h5><p>select ename from EMP where ename like ‘ %A% ‘;<br>模糊查询的时候，第一个通配符使用的是%，这个时候索引是是失效的。</p>
<h5 id="试图-View"><a href="#试图-View" class="headerlink" title="试图(View)"></a><font color="#f2711c">试图(View)</font></h5><h6 id="什么是视图？"><a href="#什么是视图？" class="headerlink" title="什么是视图？"></a><font color="#f2711c">什么是视图？</font></h6><p>站在不同的角度去看到数据。(同一张表的数据，通过不同的角度去看待)</p>
<h6 id="怎么创建视图？怎么删除视图？"><a href="#怎么创建视图？怎么删除视图？" class="headerlink" title="怎么创建视图？怎么删除视图？"></a><font color="#f2711c">怎么创建视图？怎么删除视图？</font></h6><p>create view myview as select empno,ename from EMP;<br>drop view myview;<br>注意：只有DQL语句才能以试图对象的方式创建出来。</p>
<h6 id="对试图进行增删改查，会影响到原表数据。-通过视图影响原表数据，不是直接操作的原表"><a href="#对试图进行增删改查，会影响到原表数据。-通过视图影响原表数据，不是直接操作的原表" class="headerlink" title="对试图进行增删改查，会影响到原表数据。(通过视图影响原表数据，不是直接操作的原表)"></a><font color="#f2711c">对试图进行增删改查，会影响到原表数据。(通过视图影响原表数据，不是直接操作的原表)</font></h6><p>可以对试图进行CRUD操作。</p>
<h6 id="面向视图操作？"><a href="#面向视图操作？" class="headerlink" title="面向视图操作？"></a><font color="#f2711c">面向视图操作？</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select * from myview;</span><br><span class="line">	+-------+--------+</span><br><span class="line">	| empno | ename  |</span><br><span class="line">	+-------+--------+</span><br><span class="line">	|  7369 | SMITH  |</span><br><span class="line">	|  7499 | ALLEN  |</span><br><span class="line">	|  7521 | WARD   |</span><br><span class="line">	|  7566 | JONES  |</span><br><span class="line">	|  7654 | MARTIN |</span><br><span class="line">	|  7698 | BLAKE  |</span><br><span class="line">	|  7782 | CLARK  |</span><br><span class="line">	|  7788 | SCOTT  |</span><br><span class="line">	|  7839 | KING   |</span><br><span class="line">	|  7844 | TURNER |</span><br><span class="line">	|  7876 | ADAMS  |</span><br><span class="line">	|  7900 | JAMES  |</span><br><span class="line">	|  7902 | FORD   |</span><br><span class="line">	|  7934 | MILLER |</span><br><span class="line">	+-------+--------+</span><br><span class="line"></span><br><span class="line">create table emp_bak as select * from EMP;</span><br><span class="line">create view myview1 as select empno,ename,sal from emp_bak;</span><br><span class="line">update myview1 set ename = &#x27;hehe&#x27;,sal = 1 where empno 7369;  //通过视图修改原表数据。</span><br><span class="line">delete from myview1 where empno = 7369;  //通过试图删除原表数据。</span><br></pre></td></tr></table></figure>
<h6 id="试图的作用？"><a href="#试图的作用？" class="headerlink" title="试图的作用？"></a><font color="#f2711c">试图的作用？</font></h6><p>试图可以隐藏表的实现细节。保密级别较高的系统，数据库只对外提供相关的视图，java程序员只对视图对象进行CRUD。</p>
<h5 id="DBA命令"><a href="#DBA命令" class="headerlink" title="DBA命令"></a><font color="#f2711c">DBA命令</font></h5><h6 id="在数据库当中的数据导出"><a href="#在数据库当中的数据导出" class="headerlink" title="在数据库当中的数据导出"></a><font color="#f2711c">在数据库当中的数据导出</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在windows的DOS命令窗口中执行： (导出整个库)</span><br><span class="line">    mysqldump bjpowernode&gt;D:\bjpowernode.sql -uroot -p999</span><br><span class="line">在windows的dos命令窗口中执行：(导出数据库中指定的表)</span><br><span class="line">    mysqldump bjpowernode emp&gt;D:\bjpowernode.sql -uroot -p999</span><br></pre></td></tr></table></figure>
<h6 id="导入数据-1"><a href="#导入数据-1" class="headerlink" title="导入数据"></a><font color="#f2711c">导入数据</font></h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create database bjpowernode;</span><br><span class="line">use bjpowernode;</span><br><span class="line">source D:\bjpowernode.sql </span><br></pre></td></tr></table></figure>

<h5 id="数据库设计三范式-重点内容，面试经常会问"><a href="#数据库设计三范式-重点内容，面试经常会问" class="headerlink" title="数据库设计三范式(重点内容，面试经常会问)"></a><font color="#f2711c">数据库设计三范式(重点内容，面试经常会问)</font></h5><h6 id="什么是设计范式？"><a href="#什么是设计范式？" class="headerlink" title="什么是设计范式？"></a><font color="#f2711c">什么是设计范式？</font></h6><p>设计表的依据。按照这三个范式设计的表不会出现数据冗余。</p>
<h6 id="三范式都是哪些？"><a href="#三范式都是哪些？" class="headerlink" title="三范式都是哪些？"></a><font color="#f2711c">三范式都是哪些？</font></h6><ul>
<li>第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。</li>
<li>第二范式：建立在第一范式的基础上，所有非主键字段完全依赖主键，不能产生部份依赖。<br>多对多？三张表，关系表两个外键。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">t_student学生表</span><br><span class="line">sno(pk)        sname</span><br><span class="line">---------------------</span><br><span class="line">  1             张三</span><br><span class="line">  2             李四 </span><br><span class="line">  3             王五</span><br><span class="line"></span><br><span class="line">t_teacher 讲师表</span><br><span class="line">tno(pk)        tname</span><br><span class="line">----------------------</span><br><span class="line">  1						  王老师</span><br><span class="line">  2							张老师</span><br><span class="line">  3							李老师</span><br><span class="line"></span><br><span class="line">t_student_teacher_relation 学生讲师关系表</span><br><span class="line">id(pk)         sno(fk)          tno(fk)</span><br><span class="line">-------------------------------------------</span><br><span class="line">  1	             1                  3</span><br><span class="line">  2	             1	              	1</span><br><span class="line">  3	             2	              	2</span><br><span class="line">  4	             2                	3</span><br><span class="line">  5	             3	              	1</span><br><span class="line">  6	             3	              	3</span><br></pre></td></tr></table></figure></li>
<li>建立在第二范式的基础上，所有非主键字段直接依赖主键，不能产生传递依赖。<br>一对多？两张表，多的表加外键。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">班级t_class</span><br><span class="line">cno(pk)          cname</span><br><span class="line">--------------------------</span><br><span class="line">  1              班级1</span><br><span class="line">  2              班级2</span><br><span class="line"></span><br><span class="line">学生t_student</span><br><span class="line">sno(pk)         sname         classno(fk)</span><br><span class="line">--------------------------------------------</span><br><span class="line"> 101	     张1	            1</span><br><span class="line"> 102             张2	            2</span><br><span class="line"> 103	     张3	            2</span><br><span class="line"> 104	     张4	            1</span><br><span class="line"> 105	     张5	            2</span><br></pre></td></tr></table></figure>
提醒：在实际的开发中，以满足客户需求为主，有的时候会拿冗余换执行速度。</li>
</ul>
<h6 id="一对一怎么设计？"><a href="#一对一怎么设计？" class="headerlink" title="一对一怎么设计？"></a><font color="#f2711c">一对一怎么设计？</font></h6><p>一对一设计有两种方案：主键共享，外键唯一。</p>
<ul>
<li><p>主键共享</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">t_user_login 用户登陆表</span><br><span class="line">id(pk)       username        password</span><br><span class="line">----------------------------------------</span><br><span class="line">  1             zs                123</span><br><span class="line">  2             ls                456</span><br><span class="line">   </span><br><span class="line">t_user_detail 用户详细信息表</span><br><span class="line">id(pk+fk)         realname          tel          ...</span><br><span class="line">----------------------------------------------------</span><br><span class="line">1                  张三            11111111112234</span><br><span class="line">2	                 李四            12112523432412</span><br></pre></td></tr></table></figure></li>
<li><p>外键唯一</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">t_user_login 用户登陆表</span><br><span class="line">id(pk)       username        password</span><br><span class="line">----------------------------------------</span><br><span class="line">  1             zs                123</span><br><span class="line">  2             ls                456</span><br><span class="line"></span><br><span class="line">t_user_detail 用户详细信息表</span><br><span class="line">id(pk)          realname            tel            userid(fk+unique)      </span><br><span class="line">----------------------------------------------------</span><br><span class="line">  1                张三            111111114          2</span><br><span class="line">  2	               李四            121432412          1</span><br></pre></td></tr></table></figure></li>
</ul>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Baishu</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://example.com/2019/04/06/mysql/use/" title="Mysql的使用">http://example.com/2019/04/06/mysql/use/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2019/06/02/redis/use/" rel="prev" title="Redis的使用"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Redis的使用</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2019/03/27/network/dns/" rel="next" title="DNS"><span class="post-nav-text">DNS</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> Baishu</span></div><div class="powered"><span>由 <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> 驱动 v5.4.0</span><span class="footer-separator">|</span><span>主题 - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.6.2</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="/js/search/local-search.js" defer></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div id="local-search-result"></div></div></div></body></html>